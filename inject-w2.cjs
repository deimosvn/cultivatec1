// Script to inject questions for Worlds 2-6
const fs = require('fs');

function serializeQuestion(q) {
  if (q.tipo === 'mini_quiz') {
    const opts = q.opciones.map(o => `"${o.replace(/"/g, '\\"')}"`).join(', ');
    return `{ titulo: "${q.titulo}", tipo: 'mini_quiz', pregunta: "${q.pregunta.replace(/"/g, '\\"')}", opciones: [${opts}], respuestaCorrecta: ${q.respuestaCorrecta}, explicacion: "${q.explicacion.replace(/"/g, '\\"')}" }`;
  }
  if (q.tipo === 'true_false') {
    const stmts = q.statements.map(s => `{ text: '${s.text.replace(/'/g, "\\'")}', correct: ${s.correct}, explain: '${s.explain.replace(/'/g, "\\'")}' }`).join(', ');
    return `{ titulo: "${q.titulo}", tipo: 'true_false', statements: [${stmts}] }`;
  }
  if (q.tipo === 'matching_game') {
    const pairs = q.pairs.map(p => `{ left: '${p.left.replace(/'/g, "\\'")}', right: '${p.right.replace(/'/g, "\\'")}' }`).join(', ');
    return `{ titulo: "${q.titulo}", tipo: 'matching_game', instruccion: '${(q.instruccion||'Conecta los conceptos').replace(/'/g, "\\'")}', pairs: [${pairs}] }`;
  }
  return JSON.stringify(q);
}

function injectQuestions(filePath, extraQuestions) {
  let src = fs.readFileSync(filePath, 'utf-8');
  let offset = 0;
  let count = 0;
  
  for (const [moduleId, questions] of Object.entries(extraQuestions)) {
    if (!questions || questions.length === 0) continue;
    
    const idPattern = `id: '${moduleId}'`;
    const idIdx = src.indexOf(idPattern, offset);
    if (idIdx === -1) { console.log(`WARNING: ${moduleId} not found`); continue; }
    
    const ctSearch = src.indexOf('contenidoTeorico:', idIdx);
    if (ctSearch === -1 || ctSearch - idIdx > 3000) continue;
    
    const bracketStart = src.indexOf('[', ctSearch);
    if (bracketStart === -1) continue;
    
    let depth = 0, closingIdx = -1;
    for (let i = bracketStart; i < src.length; i++) {
      if (src[i] === '[') depth++;
      else if (src[i] === ']') { depth--; if (depth === 0) { closingIdx = i; break; } }
    }
    if (closingIdx === -1) continue;
    
    const insertions = questions.map(q => '\n            ' + serializeQuestion(q) + ',').join('');
    src = src.slice(0, closingIdx) + insertions + src.slice(closingIdx);
    offset = closingIdx + insertions.length;
    count += questions.length;
    console.log(`  ‚úÖ ${moduleId}: +${questions.length}`);
  }
  
  fs.writeFileSync(filePath, src, 'utf-8');
  console.log(`  üíæ Saved (${count} questions added)\n`);
}

// ============================================
// WORLD 2: La F√°brica de Aut√≥matas
// ============================================
const W2 = {
  'w2_mod1_ultrasonico': [ // has 4, need 6
    { titulo: "‚úÖ Quiz: Velocidad del Sonido", tipo: 'mini_quiz', pregunta: "¬øA qu√© velocidad viaja el sonido en el aire (aproximadamente)?", opciones: ["100 m/s", "343 m/s", "1000 m/s", "3000 m/s"], respuestaCorrecta: 1, explicacion: "El sonido viaja a ~343 m/s en el aire a 20¬∞C. El HC-SR04 usa esto para calcular distancia. üîä" },
    { titulo: "‚úÖ Quiz: Trigger y Echo", tipo: 'mini_quiz', pregunta: "¬øQu√© pin del HC-SR04 ENV√çA el pulso ultras√≥nico?", opciones: ["Echo", "Trigger", "VCC", "GND"], respuestaCorrecta: 1, explicacion: "Trigger env√≠a el pulso, Echo recibe el rebote. Trigger = disparador, Echo = eco. ü¶á" },
    { titulo: "‚úÖ Quiz: C√°lculo de Distancia", tipo: 'mini_quiz', pregunta: "¬øPor qu√© se divide entre 2 el tiempo del eco en el c√°lculo de distancia?", opciones: ["Por error del sensor", "Porque el sonido va y VUELVE (ida y vuelta)", "Para mayor precisi√≥n", "No se divide"], respuestaCorrecta: 1, explicacion: "El sonido recorre la distancia 2 veces: va al objeto y regresa. Dividir entre 2 da la distancia real. üìè" },
    { titulo: "‚úÖ‚ùå Ultras√≥nico: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'El HC-SR04 puede medir distancias de hasta 4 metros.', correct: true, explain: 'Su rango es de 2 a 400 cm (4 metros).' }, { text: 'El sensor ultras√≥nico funciona con luz infrarroja.', correct: false, explain: 'Usa ondas de SONIDO (ultrasonido), no luz. Por eso funciona en la oscuridad.' }] },
    { titulo: "üß© Sensor Ultras√≥nico", tipo: 'matching_game', instruccion: 'Conecta cada pin con su funci√≥n', pairs: [{ left: 'VCC', right: 'Alimentaci√≥n 5V' }, { left: 'GND', right: 'Tierra/Negativo' }, { left: 'Trigger', right: 'Env√≠a pulso' }, { left: 'Echo', right: 'Recibe eco' }] },
    { titulo: "‚úÖ Quiz: Zona Muerta", tipo: 'mini_quiz', pregunta: "¬øCu√°l es la distancia m√≠nima que puede medir el HC-SR04?", opciones: ["0 cm", "2 cm", "10 cm", "50 cm"], respuestaCorrecta: 1, explicacion: "El HC-SR04 tiene una zona muerta de 2 cm. Distancias menores no se miden correctamente. üìê" },
  ],
  'w2_mod2_infrarrojo': [ // has 3, need 7
    { titulo: "‚úÖ Quiz: Principio IR", tipo: 'mini_quiz', pregunta: "¬øC√≥mo distingue un sensor IR una l√≠nea negra del suelo blanco?", opciones: ["Por la temperatura", "El negro absorbe la luz IR y el blanco la refleja", "Por el peso", "No puede distinguir"], respuestaCorrecta: 1, explicacion: "Las superficies blancas reflejan la luz IR de vuelta al sensor; las negras la absorben. ¬°As√≠ sigue la l√≠nea! üõ§Ô∏è" },
    { titulo: "‚úÖ Quiz: Siguel√≠neas", tipo: 'mini_quiz', pregunta: "¬øCu√°ntos sensores IR m√≠nimos necesita un robot siguel√≠neas b√°sico?", opciones: ["1 sensor", "2 sensores", "5 sensores", "10 sensores"], respuestaCorrecta: 1, explicacion: "Con 2 sensores (izquierdo y derecho) el robot puede seguir una l√≠nea: si el izquierdo detecta negro, gira a la izquierda. ü§ñ" },
    { titulo: "‚úÖ Quiz: Calibraci√≥n", tipo: 'mini_quiz', pregunta: "¬øPor qu√© es importante calibrar los sensores IR antes de usarlos?", opciones: ["Solo por est√©tica", "Porque la luz ambiental afecta las lecturas", "No necesitan calibraci√≥n", "Para que sean m√°s caros"], respuestaCorrecta: 1, explicacion: "La luz ambiental y el color exacto del piso afectan las lecturas. Calibrar ajusta los umbrales para cada ambiente. ‚öôÔ∏è" },
    { titulo: "‚úÖ Quiz: Digital vs Anal√≥gico", tipo: 'mini_quiz', pregunta: "¬øQu√© ventaja tiene un sensor IR con salida ANAL√ìGICA sobre uno digital?", opciones: ["Es m√°s barato", "Puede medir qu√© tan cerca est√° de la l√≠nea, no solo si est√° o no", "No tiene ventaja", "Es m√°s peque√±o"], respuestaCorrecta: 1, explicacion: "La salida anal√≥gica da un rango de valores (0-1023), permitiendo saber la posici√≥n exacta del robot respecto a la l√≠nea. üìä" },
    { titulo: "‚úÖ‚ùå Sensor IR: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'Un sensor IR puede detectar l√≠neas de cualquier color sobre cualquier fondo.', correct: false, explain: 'Funciona mejor con alto contraste: l√≠nea oscura sobre fondo claro.' }, { text: 'Los sensores IR emiten luz invisible al ojo humano.', correct: true, explain: 'La luz infrarroja tiene longitud de onda mayor que la luz visible, no podemos verla.' }] },
    { titulo: "üß© Control Siguel√≠neas", tipo: 'matching_game', instruccion: 'Conecta la lectura del sensor con la acci√≥n', pairs: [{ left: 'Ambos en blanco', right: 'Avanzar recto' }, { left: 'Izquierdo en negro', right: 'Girar a la izquierda' }, { left: 'Derecho en negro', right: 'Girar a la derecha' }, { left: 'Ambos en negro', right: 'Detenerse o cruce' }] },
    { titulo: "‚úÖ Quiz: Velocidad del Robot", tipo: 'mini_quiz', pregunta: "Si un robot siguel√≠neas va muy r√°pido, ¬øqu√© puede pasar?", opciones: ["Sigue mejor la l√≠nea", "Se sale de la l√≠nea en las curvas", "Los sensores mejoran", "Nada"], respuestaCorrecta: 1, explicacion: "A alta velocidad el robot no puede reaccionar a tiempo en las curvas. ¬°La velocidad debe ajustarse a la complejidad del camino! üèéÔ∏è" },
  ],
  'w2_mod3_temp_hum': [ // has 3, need 7
    { titulo: "‚úÖ Quiz: DHT11", tipo: 'mini_quiz', pregunta: "¬øQu√© dos variables mide el sensor DHT11?", opciones: ["Luz y sonido", "Temperatura y humedad", "Distancia y velocidad", "Presi√≥n y altitud"], respuestaCorrecta: 1, explicacion: "DHT11 mide Temperatura (0-50¬∞C, ¬±2¬∞) y Humedad relativa (20-80%). ¬°Un mini meteor√≥logo! üå°Ô∏è" },
    { titulo: "‚úÖ Quiz: Rango DHT11", tipo: 'mini_quiz', pregunta: "¬øCu√°l es el rango de temperatura del DHT11?", opciones: ["-40¬∞C a 80¬∞C", "0¬∞C a 50¬∞C", "-20¬∞C a 100¬∞C", "10¬∞C a 30¬∞C"], respuestaCorrecta: 1, explicacion: "El DHT11 mide de 0 a 50¬∞C. Para rangos mayores se usa el DHT22 (-40 a 80¬∞C). üå°Ô∏è" },
    { titulo: "‚úÖ Quiz: DHT22 vs DHT11", tipo: 'mini_quiz', pregunta: "¬øQu√© ventaja tiene el DHT22 sobre el DHT11?", opciones: ["Es m√°s barato", "Mayor rango y precisi√≥n", "Es m√°s peque√±o", "No necesita librer√≠a"], respuestaCorrecta: 1, explicacion: "DHT22: -40 a 80¬∞C (¬±0.5¬∞) vs DHT11: 0 a 50¬∞C (¬±2¬∞). ¬°M√°s rango y m√°s preciso! üìä" },
    { titulo: "‚úÖ Quiz: Humedad", tipo: 'mini_quiz', pregunta: "¬øQu√© significa una humedad relativa del 80%?", opciones: ["Que el 80% del aire es agua", "Que el aire tiene el 80% de la humedad m√°xima que puede contener", "Que llueve al 80%", "Que la temperatura es 80¬∞C"], respuestaCorrecta: 1, explicacion: "Humedad relativa es el porcentaje de agua en el aire respecto al m√°ximo que puede contener a esa temperatura. üíß" },
    { titulo: "‚úÖ‚ùå Clima Rob√≥tico: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'El DHT11 necesita una librer√≠a especial en Arduino para funcionar.', correct: true, explain: 'Usa la librer√≠a DHT.h para leer los datos digitales del sensor.' }, { text: 'Un sensor de temperatura puede sustituir completamente a un term√≥metro m√©dico.', correct: false, explain: 'Los sensores como DHT11 no tienen la precisi√≥n necesaria para uso m√©dico (¬±2¬∞C de error).' }] },
    { titulo: "üß© Sensores de Clima", tipo: 'matching_game', instruccion: 'Conecta cada sensor con su especialidad', pairs: [{ left: 'DHT11', right: 'Temp + humedad b√°sico' }, { left: 'DHT22', right: 'Temp + humedad preciso' }, { left: 'LM35', right: 'Solo temperatura anal√≥gico' }, { left: 'BMP280', right: 'Presi√≥n + altitud' }] },
    { titulo: "‚úÖ Quiz: Aplicaciones", tipo: 'mini_quiz', pregunta: "¬øPara qu√© usar√≠a un robot los datos de temperatura y humedad?", opciones: ["Para nada", "Para controlar riego autom√°tico o clima de invernadero", "Para cambiar de color", "Para ir m√°s r√°pido"], respuestaCorrecta: 1, explicacion: "¬°Automatizaci√≥n! Un robot puede activar ventiladores si hace calor o riego si la humedad es baja. üå±" },
  ],
  'w2_mod4_luz_color': [ // has 2, need 8
    { titulo: "‚úÖ Quiz: LDR", tipo: 'mini_quiz', pregunta: "¬øQu√© le pasa a la resistencia de un LDR cuando hay mucha luz?", opciones: ["Aumenta mucho", "Disminuye", "Se mantiene igual", "Se rompe"], respuestaCorrecta: 1, explicacion: "LDR = resistencia dependiente de luz. M√°s luz = MENOS resistencia. En oscuridad, la resistencia es muy alta. üí°" },
    { titulo: "‚úÖ Quiz: RGB", tipo: 'mini_quiz', pregunta: "¬øQu√© colores primarios usa un LED RGB?", opciones: ["Cyan, Magenta, Amarillo", "Rojo, Verde, Azul", "Rojo, Amarillo, Azul", "Blanco, Negro, Gris"], respuestaCorrecta: 1, explicacion: "RGB = Red (rojo), Green (verde), Blue (azul). Mezcl√°ndolos con PWM puedes crear cualquier color. üåà" },
    { titulo: "‚úÖ Quiz: PWM y Color", tipo: 'mini_quiz', pregunta: "¬øQu√© valor PWM necesitas enviar a los 3 canales del LED RGB para obtener luz BLANCA?", opciones: ["R=255, G=0, B=0", "R=0, G=0, B=255", "R=255, G=255, B=255", "R=0, G=0, B=0"], respuestaCorrecta: 2, explicacion: "¬°Los 3 al m√°ximo! Rojo + Verde + Azul al 100% = Blanco. Con R=G=B=0 est√° apagado. ü§ç" },
    { titulo: "‚úÖ Quiz: Sensor de Luz Solar", tipo: 'mini_quiz', pregunta: "¬øC√≥mo podr√≠a un robot usar un LDR para buscar la luz solar?", opciones: ["Medir temperatura", "Girar hacia donde el LDR detecte m√°s luz", "No puede", "Medir distancia"], respuestaCorrecta: 1, explicacion: "Con 2 LDRs (izquierdo y derecho), el robot gira hacia el que detecte m√°s luz. ¬°Como un girasol rob√≥tico! üåª" },
    { titulo: "‚úÖ‚ùå Luz y Color: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'Mezclando rojo y verde en un LED RGB se obtiene amarillo.', correct: true, explain: 'En luz (modelo aditivo): R+G = Amarillo, R+B = Magenta, G+B = Cyan.' }, { text: 'Un LDR genera electricidad como un panel solar.', correct: false, explain: 'El LDR solo cambia su resistencia con la luz. No genera energ√≠a.' }] },
    { titulo: "üß© Colores RGB", tipo: 'matching_game', instruccion: 'Conecta cada mezcla RGB con el color resultante', pairs: [{ left: 'R=255, G=0, B=0', right: 'Rojo' }, { left: 'R=0, G=255, B=0', right: 'Verde' }, { left: 'R=255, G=255, B=0', right: 'Amarillo' }, { left: 'R=255, G=0, B=255', right: 'Magenta' }] },
    { titulo: "‚úÖ Quiz: Divisor de Voltaje", tipo: 'mini_quiz', pregunta: "¬øPor qu√© se usa un divisor de voltaje con el LDR para conectarlo al Arduino?", opciones: ["Para que sea m√°s bonito", "Para convertir el cambio de resistencia en un cambio de voltaje legible", "Para ahorrar energ√≠a", "No se necesita"], respuestaCorrecta: 1, explicacion: "El Arduino lee voltaje (0-5V), no resistencia. El divisor de voltaje con una resistencia fija convierte la variaci√≥n del LDR en voltaje. üìä" },
    { titulo: "‚úÖ Quiz: Luz Ambiental", tipo: 'mini_quiz', pregunta: "¬øQu√© aplicaci√≥n tiene un sensor de luz en un robot?", opciones: ["Decoraci√≥n", "Encender luces autom√°ticamente cuando oscurece", "Medir peso", "Contar objetos"], respuestaCorrecta: 1, explicacion: "¬°Automatizaci√≥n! Un robot puede encender LEDs cuando detecta oscuridad, como las luces autom√°ticas del carro. üöóüí°" },
  ],
  'w2_mod5_chasis': [ // has 2, need 8
    { titulo: "‚úÖ Quiz: Material del Chasis", tipo: 'mini_quiz', pregunta: "¬øQu√© material es m√°s f√°cil para construir el primer chasis de un robot?", opciones: ["Titanio", "Cart√≥n reciclado", "Vidrio", "Cemento"], respuestaCorrecta: 1, explicacion: "¬°Cart√≥n! Es gratis, f√°cil de cortar, liviano y puedes redise√±ar sin gastar. Perfecto para prototipos. ‚ôªÔ∏è" },
    { titulo: "‚úÖ Quiz: Centro de Gravedad", tipo: 'mini_quiz', pregunta: "¬øD√≥nde debe estar el centro de gravedad de un robot con ruedas para mayor estabilidad?", opciones: ["Arriba", "Al frente", "Bajo y centrado", "Atr√°s"], respuestaCorrecta: 2, explicacion: "Centro de gravedad bajo y centrado = m√°xima estabilidad. Las bater√≠as (lo m√°s pesado) van en la base. ‚öñÔ∏è" },
    { titulo: "‚úÖ Quiz: Tracci√≥n", tipo: 'mini_quiz', pregunta: "¬øCu√°ntas ruedas motrices tiene un robot diferencial t√≠pico?", opciones: ["1", "2", "4", "6"], respuestaCorrecta: 1, explicacion: "Un robot diferencial tiene 2 ruedas motrices independientes + 1 rueda loca de apoyo. Gira cambiando la velocidad de cada rueda. üõû" },
    { titulo: "‚úÖ Quiz: Rueda Loca", tipo: 'mini_quiz', pregunta: "¬øPara qu√© sirve la rueda loca (castor) en un robot?", opciones: ["Para ir m√°s r√°pido", "Para dar soporte y equilibrio sin motor", "Para frenar", "Para girar el volante"], respuestaCorrecta: 1, explicacion: "La rueda loca solo da soporte: gira libremente en cualquier direcci√≥n. Los motores est√°n en las otras 2 ruedas. üîÑ" },
    { titulo: "‚úÖ‚ùå Chasis: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'Un robot m√°s pesado siempre es m√°s estable.', correct: false, explain: 'Depende de la distribuci√≥n del peso. Un robot pesado mal balanceado se voltea f√°cilmente.' }, { text: 'Es importante dejar espacio accesible para cambiar bater√≠as.', correct: true, explain: 'Un buen dise√±o permite mantenimiento f√°cil sin desarmar todo el robot.' }] },
    { titulo: "üß© Materiales y Propiedades", tipo: 'matching_game', instruccion: 'Conecta cada material con su mejor caracter√≠stica', pairs: [{ left: 'üì¶ Cart√≥n', right: 'Barato y f√°cil de cortar' }, { left: 'üß± Acr√≠lico', right: 'Resistente y transparente' }, { left: 'üñ®Ô∏è PLA (impresi√≥n 3D)', right: 'Personalizable y preciso' }, { left: 'üî© Aluminio', right: 'Liviano y muy fuerte' }] },
    { titulo: "‚úÖ Quiz: Distribuci√≥n de Componentes", tipo: 'mini_quiz', pregunta: "¬øD√≥nde debes colocar el Arduino en el chasis?", opciones: ["Debajo de las ruedas", "En un lugar accesible y protegido", "Fuera del chasis", "No importa"], respuestaCorrecta: 1, explicacion: "El Arduino debe estar accesible (para conectar USB y sensores) y protegido de impactos o cortocircuitos. üîß" },
    { titulo: "‚úÖ Quiz: Tama√±o Ideal", tipo: 'mini_quiz', pregunta: "¬øCu√°l es un buen tama√±o para un robot de competencia b√°sico?", opciones: ["5 cm x 5 cm", "15 cm x 20 cm", "1 metro x 1 metro", "50 cm x 50 cm"], respuestaCorrecta: 1, explicacion: "~15-20 cm es ideal: suficiente espacio para componentes, pero compacto y maniobrable. ¬°La mayor√≠a de torneos tienen l√≠mites de tama√±o! üìê" },
  ],
  'w2_mod6_motores_avanzado': [ // has 2, need 8
    { titulo: "‚úÖ Quiz: PWM Velocidad", tipo: 'mini_quiz', pregunta: "¬øQu√© valor de analogWrite() da la M√ÅXIMA velocidad al motor?", opciones: ["0", "127", "255", "1023"], respuestaCorrecta: 2, explicacion: "analogWrite va de 0 (parado) a 255 (m√°xima velocidad). 127 = velocidad media. üèéÔ∏è" },
    { titulo: "‚úÖ Quiz: Aceleraci√≥n Suave", tipo: 'mini_quiz', pregunta: "¬øPor qu√© es mejor acelerar gradualmente un motor en vez de ponerlo al m√°ximo de golpe?", opciones: ["Por est√©tica", "Para proteger el motor y mejorar la tracci√≥n", "Para ir m√°s lento", "No hay raz√≥n"], respuestaCorrecta: 1, explicacion: "La aceleraci√≥n gradual protege los engranajes, evita patinaje de ruedas y reduce picos de corriente. üìà" },
    { titulo: "‚úÖ Quiz: Giro Diferencial", tipo: 'mini_quiz', pregunta: "¬øC√≥mo gira un robot diferencial hacia la DERECHA?", opciones: ["Ambos motores a la misma velocidad", "Motor izquierdo m√°s r√°pido que el derecho", "Motor derecho m√°s r√°pido que el izquierdo", "Ambos motores apagados"], respuestaCorrecta: 1, explicacion: "Para girar a la derecha: el motor izquierdo va m√°s r√°pido, el derecho m√°s lento (o al rev√©s). ¬°Diferencia de velocidad = giro! üîÑ" },
    { titulo: "‚úÖ Quiz: Giro sobre su Eje", tipo: 'mini_quiz', pregunta: "¬øC√≥mo haces que un robot diferencial gire sobre su propio eje?", opciones: ["Un motor adelante, otro atr√°s", "Ambos motores adelante", "Apagando todo", "Solo un motor encendido"], respuestaCorrecta: 0, explicacion: "¬°Motores girando en direcciones opuestas! Uno adelante y otro atr√°s hace que rote sobre su centro. ¬°Giro en el lugar! üîÑ" },
    { titulo: "‚úÖ‚ùå Motores: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'PWM simula voltajes intermedios encendiendo y apagando el pin muy r√°pido.', correct: true, explain: 'PWM = Modulaci√≥n por Ancho de Pulso. Alterna HIGH/LOW muy r√°pido para simular voltaje medio.' }, { text: 'Para frenar un motor basta con poner PWM en 127.', correct: false, explain: 'PWM 127 es media velocidad, no freno. Para frenar: ambos IN a LOW o ambos a HIGH (freno activo).' }] },
    { titulo: "üß© Velocidad y Control", tipo: 'matching_game', instruccion: 'Conecta cada PWM con su resultado', pairs: [{ left: 'analogWrite(0)', right: 'Motor parado' }, { left: 'analogWrite(64)', right: '25% velocidad' }, { left: 'analogWrite(127)', right: '50% velocidad' }, { left: 'analogWrite(255)', right: '100% velocidad' }] },
    { titulo: "‚úÖ Quiz: Corriente del Motor", tipo: 'mini_quiz', pregunta: "¬øPor qu√© un motor consume m√°s corriente al arrancar que cuando ya est√° girando?", opciones: ["Error del motor", "Al inicio necesita vencer la inercia (corriente de arranque)", "Consume menos al inicio", "No hay diferencia"], respuestaCorrecta: 1, explicacion: "La corriente de arranque puede ser 3-5 veces la normal. Por eso se recomienda aceleraci√≥n gradual. ‚ö°" },
    { titulo: "‚úÖ Quiz: Encoders", tipo: 'mini_quiz', pregunta: "¬øPara qu√© sirve un encoder en un motor de robot?", opciones: ["Para decorar", "Para medir la velocidad y distancia recorrida por la rueda", "Para encender LEDs", "Para medir temperatura"], respuestaCorrecta: 1, explicacion: "Los encoders cuentan las vueltas/grados del motor, permitiendo medir distancia recorrida y velocidad exacta. üìä" },
  ],
  'w2_mod7_servo_garra': [ // has 2, need 8
    { titulo: "‚úÖ Quiz: Rango del Servo", tipo: 'mini_quiz', pregunta: "¬øCu√°l es el rango de movimiento t√≠pico de un micro servo SG90?", opciones: ["0¬∞ a 90¬∞", "0¬∞ a 180¬∞", "0¬∞ a 360¬∞", "-90¬∞ a 90¬∞"], respuestaCorrecta: 1, explicacion: "El SG90 se mueve de 0¬∞ a 180¬∞ con gran precisi√≥n. Para giro continuo se necesita un servo especial. üéØ" },
    { titulo: "‚úÖ Quiz: Se√±al del Servo", tipo: 'mini_quiz', pregunta: "¬øQu√© tipo de se√±al controla un servo motor?", opciones: ["Voltaje anal√≥gico", "Se√±al PWM (pulsos de diferente ancho)", "Se√±al de audio", "Corriente continua directa"], respuestaCorrecta: 1, explicacion: "Los servos usan PWM: un pulso de 1ms = 0¬∞, 1.5ms = 90¬∞, 2ms = 180¬∞. ¬°El ancho del pulso determina el √°ngulo! üìè" },
    { titulo: "‚úÖ Quiz: Servo.write()", tipo: 'mini_quiz', pregunta: "¬øQu√© hace Servo.write(90) en Arduino?", opciones: ["Gira el servo a 90 grados", "Apaga el servo", "Gira 90 vueltas", "Espera 90 segundos"], respuestaCorrecta: 0, explicacion: "Servo.write(90) mueve el servo exactamente a la posici√≥n de 90¬∞. ¬°Puedes poner cualquier √°ngulo de 0 a 180! üéØ" },
    { titulo: "‚úÖ Quiz: Garra Rob√≥tica", tipo: 'mini_quiz', pregunta: "¬øCu√°ntos servos necesitas como m√≠nimo para una garra que abre y cierra?", opciones: ["0", "1", "3", "5"], respuestaCorrecta: 1, explicacion: "¬°Solo 1 servo! Con un mecanismo de pinza, un servo mueve ambos dedos simult√°neamente. ü¶æ" },
    { titulo: "‚úÖ‚ùå Servos: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'Un servo motor tiene engranajes internos y un sensor de posici√≥n.', correct: true, explain: 'Dentro tiene motor DC + engranajes + potenci√≥metro para saber su posici√≥n.' }, { text: 'Los servos se alimentan directamente desde los pines digitales del Arduino.', correct: false, explain: 'Necesitan alimentaci√≥n de 5V separada (pin de alimentaci√≥n), el pin digital solo env√≠a la se√±al de control.' }] },
    { titulo: "üß© √Ångulos y Posiciones", tipo: 'matching_game', instruccion: 'Conecta cada comando con la posici√≥n del servo', pairs: [{ left: 'myServo.write(0)', right: 'Extremo izquierdo' }, { left: 'myServo.write(90)', right: 'Posici√≥n central' }, { left: 'myServo.write(180)', right: 'Extremo derecho' }, { left: 'myServo.write(45)', right: 'Medio-izquierda' }] },
    { titulo: "‚úÖ Quiz: Brazo Rob√≥tico", tipo: 'mini_quiz', pregunta: "Para un brazo rob√≥tico con 3 grados de libertad (base, codo, garra), ¬øcu√°ntos servos necesitas?", opciones: ["1", "2", "3", "6"], respuestaCorrecta: 2, explicacion: "Un servo por articulaci√≥n: 1 para la base (girar), 1 para el codo (subir/bajar), 1 para la garra (abrir/cerrar). ü§ñ" },
    { titulo: "‚úÖ Quiz: Torque del Servo", tipo: 'mini_quiz', pregunta: "¬øQu√© significa que un servo tiene 1.8 kg¬∑cm de torque?", opciones: ["Pesa 1.8 kg", "Puede levantar 1.8 kg a 1 cm del eje", "Gira 1.8 veces por segundo", "Mide 1.8 cm"], respuestaCorrecta: 1, explicacion: "1.8 kg¬∑cm significa que a 1 cm del eje puede ejercer fuerza de 1.8 kg. A 2 cm ser√≠an 0.9 kg. ¬°Torque es fuerza √ó distancia! üí™" },
  ],
  'w2_mod8_evasion': [ // has 1, need 9
    { titulo: "‚úÖ Quiz: Algoritmo de Evasi√≥n", tipo: 'mini_quiz', pregunta: "¬øCu√°l es el algoritmo b√°sico de un robot evasor de obst√°culos?", opciones: ["Medir-Decidir-Actuar", "Solo avanzar siempre", "Girar aleatoriamente", "Esperar instrucciones"], respuestaCorrecta: 0, explicacion: "Medir (sensor ultras√≥nico) ‚Üí Decidir (¬øhay obst√°culo?) ‚Üí Actuar (avanzar o girar). ¬°El ciclo se repite! üîÑ" },
    { titulo: "‚úÖ Quiz: Distancia de Seguridad", tipo: 'mini_quiz', pregunta: "¬øA qu√© distancia deber√≠a un robot empezar a frenar para evitar chocar?", opciones: ["1 cm", "20-30 cm", "5 metros", "0 cm (al tocar)"], respuestaCorrecta: 1, explicacion: "20-30 cm da tiempo suficiente para frenar y girar. Depende de la velocidad del robot. ¬°Mejor prevenir! üõë" },
    { titulo: "‚úÖ Quiz: Direcci√≥n de Giro", tipo: 'mini_quiz', pregunta: "Si el robot detecta un obst√°culo al frente, ¬øc√≥mo decide si girar a la izquierda o derecha?", opciones: ["Siempre gira a la derecha", "Puede girar al azar o usar sensores laterales", "No puede girar", "Retrocede y se apaga"], respuestaCorrecta: 1, explicacion: "Con un solo sensor, puede girar al azar. Con sensores laterales, gira hacia el lado con m√°s espacio libre. üß≠" },
    { titulo: "‚úÖ Quiz: M√∫ltiples Sensores", tipo: 'mini_quiz', pregunta: "¬øQu√© ventaja tiene un robot evasor con 3 sensores (izquierda, centro, derecha)?", opciones: ["Es m√°s caro", "Puede detectar obst√°culos en 3 direcciones y elegir mejor camino", "Es m√°s lento", "No tiene ventaja"], respuestaCorrecta: 1, explicacion: "Con 3 sensores el robot sabe D√ìNDE est√° el obst√°culo y elige el lado m√°s libre. ¬°Navegaci√≥n inteligente! ü§ñ" },
    { titulo: "‚úÖ Quiz: Velocidad Adaptativa", tipo: 'mini_quiz', pregunta: "¬øPor qu√© un robot deber√≠a ir m√°s lento cuando detecta objetos cerca?", opciones: ["Para ahorrar bater√≠a", "Para tener m√°s tiempo de reacci√≥n y evitar colisiones", "Para hacer menos ruido", "No deber√≠a"], respuestaCorrecta: 1, explicacion: "Velocidad adaptativa: r√°pido si el camino est√° libre, lento cerca de obst√°culos. ¬°Como conducir en una calle estrecha! üöó" },
    { titulo: "‚úÖ‚ùå Robot Evasor: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'Un robot evasor necesita al menos un sensor de distancia y dos motores.', correct: true, explain: 'El sensor detecta obst√°culos, los 2 motores permiten girar y avanzar.' }, { text: 'El robot evasor necesita un mapa del ambiente para funcionar.', correct: false, explain: 'Un evasor b√°sico reacciona en tiempo real sin mapa. Solo necesita sensores.' }] },
    { titulo: "üß© Situaci√≥n y Acci√≥n", tipo: 'matching_game', instruccion: 'Conecta cada situaci√≥n con la acci√≥n correcta del robot', pairs: [{ left: 'Camino libre (>30cm)', right: 'Avanzar a velocidad normal' }, { left: 'Obst√°culo cerca (<20cm)', right: 'Frenar y girar' }, { left: 'Obst√°culo muy cerca (<10cm)', right: 'Retroceder y girar' }, { left: 'Espacio libre a la derecha', right: 'Girar a la derecha' }] },
    { titulo: "‚úÖ Quiz: Mejoras del Evasor", tipo: 'mini_quiz', pregunta: "¬øC√≥mo podr√≠as mejorar un robot evasor b√°sico?", opciones: ["Quitarle sensores", "Agregar m√°s sensores, mapeo y memoria de obst√°culos", "Hacerlo m√°s pesado", "Pintarlo de otro color"], respuestaCorrecta: 1, explicacion: "M√°s sensores + memoria + mapeo = navegaci√≥n m√°s inteligente. ¬°De evasor simple a explorador aut√≥nomo! üöÄ" },
    { titulo: "‚úÖ Quiz: Bucle Principal", tipo: 'mini_quiz', pregunta: "En el loop() de un robot evasor, ¬øqu√© se ejecuta primero?", opciones: ["Mover los motores", "Leer el sensor de distancia", "Encender los LEDs", "Imprimir en pantalla"], respuestaCorrecta: 1, explicacion: "Primero LEER sensores, luego DECIDIR qu√© hacer, y finalmente ACTUAR con los motores. Sentir ‚Üí Pensar ‚Üí Actuar. üîÑ" },
  ],
  'w2_mod9_serial': [ // has 2, need 8
    { titulo: "‚úÖ Quiz: Baudios", tipo: 'mini_quiz', pregunta: "¬øQu√© son los baudios en comunicaci√≥n serial?", opciones: ["Un tipo de cable", "La velocidad de transmisi√≥n de datos (bits por segundo)", "Un sensor", "Una marca de Arduino"], respuestaCorrecta: 1, explicacion: "Baudios = bits por segundo. 9600 baudios es el est√°ndar. ¬°El Arduino y la PC deben usar la misma velocidad! üì°" },
    { titulo: "‚úÖ Quiz: Serial.println", tipo: 'mini_quiz', pregunta: "¬øCu√°l es la diferencia entre Serial.print() y Serial.println()?", opciones: ["No hay diferencia", "println agrega un salto de l√≠nea al final", "print es m√°s r√°pido", "println solo imprime n√∫meros"], respuestaCorrecta: 1, explicacion: "println = print + new line. Cada mensaje aparece en una l√≠nea nueva. print pone todo seguido en la misma l√≠nea. ‚Üµ" },
    { titulo: "‚úÖ Quiz: Serial.parseInt", tipo: 'mini_quiz', pregunta: "¬øPara qu√© sirve Serial.parseInt() en Arduino?", opciones: ["Para imprimir enteros", "Para leer un n√∫mero entero enviado desde la PC", "Para contar caracteres", "Para borrar el buffer"], respuestaCorrecta: 1, explicacion: "parseInt lee un n√∫mero entero del buffer serial. Si env√≠as '150' desde el monitor serial, te da el entero 150. üî¢" },
    { titulo: "‚úÖ Quiz: Monitor Serial", tipo: 'mini_quiz', pregunta: "¬øPara qu√© es m√°s √∫til el Monitor Serial durante el desarrollo?", opciones: ["Para decorar", "Para depurar (debug): ver valores de sensores y estado del programa", "Para jugar", "Para editar c√≥digo"], respuestaCorrecta: 1, explicacion: "¬°Es tu herramienta de debug #1! Imprime valores de sensores, estados de variables y mensajes para encontrar errores. üîç" },
    { titulo: "‚úÖ Quiz: Comandos Seriales", tipo: 'mini_quiz', pregunta: "Si quieres controlar un robot desde la PC enviando letras (W=adelante, S=atr√°s), ¬øqu√© funci√≥n usas para leer la letra?", opciones: ["analogRead()", "Serial.read()", "digitalWrite()", "pinMode()"], respuestaCorrecta: 1, explicacion: "Serial.read() lee un byte (letra) del buffer serial. if(Serial.read() == 'W') avanzar(); üìù" },
    { titulo: "‚úÖ‚ùå Serial: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'TX (transmit) y RX (receive) son los pines de comunicaci√≥n serial del Arduino.', correct: true, explain: 'TX (pin 1) transmite datos, RX (pin 0) recibe. Son los pines de Serial.' }, { text: 'Puedes usar cualquier velocidad de baudios sin importar la configuraci√≥n de la PC.', correct: false, explain: '¬°Ambos deben coincidir! Si Arduino usa 9600 y la PC 115200, los datos se corrompen.' }] },
    { titulo: "üß© Funciones Serial", tipo: 'matching_game', instruccion: 'Conecta cada funci√≥n con su uso', pairs: [{ left: 'Serial.begin(9600)', right: 'Iniciar comunicaci√≥n' }, { left: 'Serial.println()', right: 'Enviar dato + nueva l√≠nea' }, { left: 'Serial.read()', right: 'Leer un byte recibido' }, { left: 'Serial.available()', right: 'Verificar si hay datos' }] },
    { titulo: "‚úÖ Quiz: Buffer Serial", tipo: 'mini_quiz', pregunta: "¬øQu√© es el buffer serial?", opciones: ["Un cable especial", "Una memoria temporal que almacena datos recibidos", "Un tipo de motor", "Un sensor de datos"], respuestaCorrecta: 1, explicacion: "El buffer guarda temporalmente los bytes recibidos hasta que tu c√≥digo los lee con Serial.read(). ¬°Como un buz√≥n de correo! üì¨" },
  ],
  'w2_mod10_display': [ // has 2, need 8
    { titulo: "‚úÖ Quiz: LCD I2C", tipo: 'mini_quiz', pregunta: "¬øCu√°ntos cables necesitas para conectar una pantalla LCD I2C al Arduino?", opciones: ["8 cables", "4 cables", "16 cables", "2 cables"], respuestaCorrecta: 1, explicacion: "I2C usa solo 4 cables: VCC, GND, SDA (datos) y SCL (reloj). ¬°Mucho m√°s simple que los 16 pines del LCD sin I2C! üîå" },
    { titulo: "‚úÖ Quiz: Tama√±o LCD", tipo: 'mini_quiz', pregunta: "¬øQu√© significa LCD 16x2?", opciones: ["16 colores y 2 formas", "16 caracteres por l√≠nea, 2 l√≠neas", "16 cm x 2 cm", "16 pines y 2 voltios"], respuestaCorrecta: 1, explicacion: "16x2 = puede mostrar 16 caracteres en 2 filas. Total: 32 caracteres. ¬°Suficiente para datos de sensores! üì∫" },
    { titulo: "‚úÖ Quiz: lcd.setCursor", tipo: 'mini_quiz', pregunta: "¬øQu√© hace lcd.setCursor(0, 1)?", opciones: ["Borra la pantalla", "Mueve el cursor al inicio de la segunda fila", "Enciende la luz de fondo", "Apaga la pantalla"], respuestaCorrecta: 1, explicacion: "setCursor(columna, fila): (0,0) = inicio primera fila, (0,1) = inicio segunda fila. Las posiciones empiezan en 0. üìç" },
    { titulo: "‚úÖ Quiz: Datos en Pantalla", tipo: 'mini_quiz', pregunta: "¬øC√≥mo mostrar√≠as la temperatura en la LCD: 'Temp: 25¬∞C'?", opciones: ["Solo con print", "lcd.print('Temp: '); lcd.print(temperatura); lcd.print('C');", "No se puede", "Con analogWrite"], respuestaCorrecta: 1, explicacion: "Usas lcd.print() varias veces o concatenas el texto con los datos del sensor. ¬°Mezcla texto fijo + variables! üìä" },
    { titulo: "‚úÖ‚ùå Display: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'I2C permite conectar m√∫ltiples dispositivos con solo 2 cables de datos.', correct: true, explain: 'I2C usa SDA y SCL. Cada dispositivo tiene una direcci√≥n √∫nica (ej: 0x27).' }, { text: 'Una LCD puede mostrar im√°genes como una pantalla de celular.', correct: false, explain: 'LCD 16x2 solo muestra texto y caracteres. Para im√°genes se necesita OLED o TFT.' }] },
    { titulo: "üß© Funciones LCD", tipo: 'matching_game', instruccion: 'Conecta cada funci√≥n con su efecto', pairs: [{ left: 'lcd.begin(16, 2)', right: 'Inicializar pantalla' }, { left: 'lcd.print()', right: 'Escribir texto' }, { left: 'lcd.clear()', right: 'Borrar pantalla' }, { left: 'lcd.setCursor(0,1)', right: 'Mover a fila 2' }] },
    { titulo: "‚úÖ Quiz: Caracteres Personalizados", tipo: 'mini_quiz', pregunta: "¬øSe pueden crear caracteres personalizados (emojis) en la LCD 16x2?", opciones: ["No, imposible", "S√≠, se pueden crear hasta 8 caracteres de 5x8 pixeles", "Solo con otra pantalla", "Solo en color"], respuestaCorrecta: 1, explicacion: "¬°S√≠! Con lcd.createChar() puedes dise√±ar hasta 8 caracteres de 5x8 pixeles. ¬°Crea caras, flechas o logos! üòä" },
    { titulo: "‚úÖ Quiz: Direcci√≥n I2C", tipo: 'mini_quiz', pregunta: "¬øQu√© pasa si configuramos una direcci√≥n I2C incorrecta para la LCD?", opciones: ["Funciona igual", "La pantalla no muestra nada", "Se rompe la pantalla", "Se apaga el Arduino"], respuestaCorrecta: 1, explicacion: "Si la direcci√≥n no coincide, el Arduino env√≠a datos a un dispositivo inexistente. La pantalla queda en blanco. Usa un I2C Scanner para encontrar la direcci√≥n correcta. üîç" },
  ],
  'w2_mod11_bluetooth': [ // has 2, need 8
    { titulo: "‚úÖ Quiz: HC-05 vs HC-06", tipo: 'mini_quiz', pregunta: "¬øCu√°l es la diferencia principal entre HC-05 y HC-06?", opciones: ["Son id√©nticos", "HC-05 es maestro/esclavo, HC-06 solo esclavo", "HC-06 es m√°s caro", "HC-05 no tiene Bluetooth"], respuestaCorrecta: 1, explicacion: "HC-05 puede iniciar conexiones (maestro) o recibirlas (esclavo). HC-06 solo espera conexiones. Para control con celular, ambos sirven. üì±" },
    { titulo: "‚úÖ Quiz: SoftwareSerial", tipo: 'mini_quiz', pregunta: "¬øPor qu√© se usa SoftwareSerial con el m√≥dulo Bluetooth en vez del Serial normal?", opciones: ["Es m√°s r√°pido", "Para no ocupar los pines TX/RX que se usan para programar", "No hay raz√≥n", "Es m√°s barato"], respuestaCorrecta: 1, explicacion: "Los pines 0/1 (TX/RX) se usan para programar el Arduino. SoftwareSerial permite usar OTROS pines para Bluetooth. üîå" },
    { titulo: "‚úÖ Quiz: Conexi√≥n BT", tipo: 'mini_quiz', pregunta: "¬øQu√© velocidad de baudios usa normalmente el HC-05/HC-06?", opciones: ["1200", "9600", "115200", "1000000"], respuestaCorrecta: 1, explicacion: "9600 baudios es la velocidad por defecto del HC-05/HC-06. Coincide con el Serial est√°ndar de Arduino. üì°" },
    { titulo: "‚úÖ Quiz: App de Control", tipo: 'mini_quiz', pregunta: "¬øQu√© necesitas en tu celular para controlar un robot por Bluetooth?", opciones: ["Nada, solo Bluetooth", "Una app que env√≠e caracteres por Bluetooth serial", "Un cable USB", "WiFi"], respuestaCorrecta: 1, explicacion: "Apps como Bluetooth Terminal o creadas con MIT App Inventor env√≠an caracteres que el Arduino lee. ¬°Control remoto! üì±ü§ñ" },
    { titulo: "‚úÖ Quiz: Alcance Bluetooth", tipo: 'mini_quiz', pregunta: "¬øCu√°l es el alcance t√≠pico del HC-05 en interiores?", opciones: ["1 metro", "10 metros", "100 metros", "1 km"], respuestaCorrecta: 1, explicacion: "~10 metros en interiores, hasta 30m en espacios abiertos. Suficiente para controlar un robot en una habitaci√≥n. üìè" },
    { titulo: "‚úÖ‚ùå Bluetooth: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'El m√≥dulo HC-05 funciona con 3.3V en su pin RX.', correct: true, explain: 'El pin RX del HC-05 es de 3.3V. Se necesita divisor de voltaje desde los 5V del Arduino.' }, { text: 'Bluetooth y WiFi son la misma tecnolog√≠a.', correct: false, explain: 'Son diferentes: Bluetooth es para distancias cortas (1-100m), WiFi para redes locales/internet.' }] },
    { titulo: "üß© Bluetooth Control", tipo: 'matching_game', instruccion: 'Conecta cada comando con la acci√≥n del robot', pairs: [{ left: "Enviar 'F'", right: 'Avanzar (Forward)' }, { left: "Enviar 'B'", right: 'Retroceder (Back)' }, { left: "Enviar 'L'", right: 'Girar izquierda (Left)' }, { left: "Enviar 'S'", right: 'Detenerse (Stop)' }] },
    { titulo: "‚úÖ Quiz: Seguridad BT", tipo: 'mini_quiz', pregunta: "¬øPor qu√© es importante cambiar el PIN por defecto (1234) del HC-05?", opciones: ["No es importante", "Para evitar que otros se conecten y controlen tu robot", "Para ir m√°s r√°pido", "Para ahorrar bater√≠a"], respuestaCorrecta: 1, explicacion: "La seguridad importa: alguien podr√≠a conectarse y tomar control de tu robot. ¬°Usa un PIN √∫nico! üîí" },
  ],
  'w2_mod12_sonido': [ // has 2, need 8
    { titulo: "‚úÖ Quiz: Buzzer", tipo: 'mini_quiz', pregunta: "¬øQu√© funci√≥n de Arduino genera un tono en el buzzer?", opciones: ["analogWrite()", "tone(pin, frecuencia)", "digitalRead()", "Serial.print()"], respuestaCorrecta: 1, explicacion: "tone(pin, frecuencia) genera una onda cuadrada en el pin. tone(8, 440) produce un La musical (440 Hz). üéµ" },
    { titulo: "‚úÖ Quiz: Frecuencia Musical", tipo: 'mini_quiz', pregunta: "¬øQu√© frecuencia corresponde a la nota DO central?", opciones: ["100 Hz", "262 Hz", "440 Hz", "1000 Hz"], respuestaCorrecta: 1, explicacion: "DO central = 262 Hz. RE = 294, MI = 330, FA = 349, SOL = 392, LA = 440, SI = 494. üé∂" },
    { titulo: "‚úÖ Quiz: noTone()", tipo: 'mini_quiz', pregunta: "¬øPara qu√© sirve noTone(pin) en Arduino?", opciones: ["Sube el volumen", "Detiene el tono que se est√° reproduciendo", "Cambia la frecuencia", "Enciende un LED"], respuestaCorrecta: 1, explicacion: "noTone() detiene el sonido en ese pin. Es necesario para crear silencios entre notas musicales. üîá" },
    { titulo: "‚úÖ Quiz: Sensor de Sonido", tipo: 'mini_quiz', pregunta: "¬øPara qu√© se usa el sensor de sonido KY-038 en un robot?", opciones: ["Para hablar", "Para detectar aplausos, golpes o niveles de ruido", "Para conectar WiFi", "Para medir distancia"], respuestaCorrecta: 1, explicacion: "El KY-038 detecta sonidos fuertes (aplausos, golpes). ¬°Puedes hacer un robot que se enciende con un aplauso! üëè" },
    { titulo: "‚úÖ Quiz: Buzzer Activo vs Pasivo", tipo: 'mini_quiz', pregunta: "¬øCu√°l es la diferencia entre un buzzer activo y uno pasivo?", opciones: ["No hay diferencia", "El activo solo emite un tono fijo, el pasivo puede emitir diferentes frecuencias", "El pasivo es m√°s caro", "El activo es m√°s grande"], respuestaCorrecta: 1, explicacion: "Buzzer activo = un solo tono (solo HIGH/LOW). Buzzer pasivo = puedes controlar la frecuencia con tone(). ¬°Para melod√≠as usa pasivo! üéµ" },
    { titulo: "‚úÖ‚ùå Sonido: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'Con la funci√≥n tone() de Arduino puedes crear melod√≠as.', correct: true, explain: 'Combinando tone() con delay() puedes tocar secuencias de notas como canciones.' }, { text: 'Un buzzer puede reproducir m√∫sica con la misma calidad que una bocina.', correct: false, explain: 'El buzzer produce tonos simples (ondas cuadradas). Para audio de calidad se necesitan parlantes con DAC.' }] },
    { titulo: "üß© Notas Musicales", tipo: 'matching_game', instruccion: 'Conecta cada nota con su frecuencia aproximada', pairs: [{ left: 'DO (C4)', right: '262 Hz' }, { left: 'MI (E4)', right: '330 Hz' }, { left: 'SOL (G4)', right: '392 Hz' }, { left: 'LA (A4)', right: '440 Hz' }] },
    { titulo: "‚úÖ Quiz: Alarma Rob√≥tica", tipo: 'mini_quiz', pregunta: "¬øC√≥mo crear√≠as una alarma que suena cuando el sensor detecta un obst√°culo muy cerca?", opciones: ["Con Serial.print()", "if(distancia < 10) tone(buzzer, 1000)", "Con pinMode()", "Con delay() solo"], respuestaCorrecta: 1, explicacion: "¬°Simple! Si la distancia es menor a 10 cm, activa el buzzer con tone(). Si no, ap√°galo con noTone(). üö®" },
  ],
  'w2_mod13_maquina_estados': [ // has 1, need 9
    { titulo: "‚úÖ Quiz: Qu√© es FSM", tipo: 'mini_quiz', pregunta: "¬øQu√© es una M√°quina de Estados Finitos (FSM)?", opciones: ["Un motor especial", "Un modelo donde el sistema tiene estados definidos y transiciones entre ellos", "Una marca de robot", "Un tipo de sensor"], respuestaCorrecta: 1, explicacion: "FSM = sistema con estados (EXPLORAR, EVADIR, ESPERAR) y reglas de transici√≥n. ¬°Organiza el comportamiento del robot! üéõÔ∏è" },
    { titulo: "‚úÖ Quiz: Estados", tipo: 'mini_quiz', pregunta: "¬øCu√°les son estados t√≠picos de un robot aut√≥nomo?", opciones: ["Feliz, Triste, Enojado", "EXPLORAR, EVADIR, ESPERAR, CARGANDO", "A, B, C, D", "1, 2, 3, 4"], respuestaCorrecta: 1, explicacion: "Los estados representan modos de operaci√≥n: explora hasta encontrar obst√°culo, evade, espera comando, etc. ü§ñ" },
    { titulo: "‚úÖ Quiz: Transiciones", tipo: 'mini_quiz', pregunta: "¬øQu√© causa una transici√≥n de estado en un robot?", opciones: ["El paso del tiempo solamente", "Un evento o condici√≥n (sensor detecta obst√°culo, bater√≠a baja, etc.)", "Nada, cambian al azar", "Solo el usuario"], respuestaCorrecta: 1, explicacion: "Las transiciones ocurren por eventos: obst√°culo detectado ‚Üí EVADIR, bater√≠a baja ‚Üí BUSCAR_CARGA, etc. üîÄ" },
    { titulo: "‚úÖ Quiz: Implementaci√≥n", tipo: 'mini_quiz', pregunta: "¬øC√≥mo se implementa una FSM b√°sica en Arduino?", opciones: ["Con analogWrite()", "Con switch/case o if/else evaluando el estado actual", "Con Serial.print()", "No se puede"], respuestaCorrecta: 1, explicacion: "switch(estadoActual) { case EXPLORAR: ... break; case EVADIR: ... break; } ¬°Simple y organizado! üíª" },
    { titulo: "‚úÖ Quiz: Variable de Estado", tipo: 'mini_quiz', pregunta: "¬øQu√© tipo de variable usar√≠as para guardar el estado actual del robot?", opciones: ["float", "String largo", "int o enum", "boolean solo"], respuestaCorrecta: 2, explicacion: "int estado = 0; // 0=EXPLORAR, 1=EVADIR, 2=ESPERAR. O mejor: enum Estado {EXPLORAR, EVADIR, ESPERAR}; üì¶" },
    { titulo: "‚úÖ‚ùå M√°quina de Estados: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'Un robot puede estar en varios estados al mismo tiempo en una FSM simple.', correct: false, explain: 'En una FSM simple, el robot est√° en UN solo estado a la vez. Para m√∫ltiples estados se usan FSM paralelas.' }, { text: 'Las FSM hacen el c√≥digo m√°s organizado y f√°cil de depurar.', correct: true, explain: 'Separar comportamientos en estados hace el c√≥digo modular y m√°s f√°cil de entender y mantener.' }] },
    { titulo: "üß© Estados y Acciones", tipo: 'matching_game', instruccion: 'Conecta cada estado con su comportamiento', pairs: [{ left: 'EXPLORAR', right: 'Avanzar y buscar camino libre' }, { left: 'EVADIR', right: 'Girar para esquivar obst√°culo' }, { left: 'ESPERAR', right: 'Detenerse hasta recibir comando' }, { left: 'ALARMA', right: 'Encender buzzer y LEDs' }] },
    { titulo: "‚úÖ Quiz: Ventajas FSM", tipo: 'mini_quiz', pregunta: "¬øCu√°l es la principal ventaja de usar FSM sobre c√≥digo secuencial largo?", opciones: ["Es m√°s lento", "Es m√°s organizado, modular y f√°cil de expandir", "Usa m√°s memoria", "No tiene ventajas"], respuestaCorrecta: 1, explicacion: "FSM separa cada comportamiento en su propio bloque. Agregar un nuevo estado es agregar un nuevo case. ¬°Escalable! üìà" },
    { titulo: "‚úÖ Quiz: Diagrama de Estados", tipo: 'mini_quiz', pregunta: "¬øQu√© es un diagrama de estados?", opciones: ["Un circuito el√©ctrico", "Un dibujo que muestra los estados y las flechas de transici√≥n entre ellos", "Un tipo de sensor", "Un programa de Arduino"], respuestaCorrecta: 1, explicacion: "Es un gr√°fico con c√≠rculos (estados) y flechas (transiciones) que muestra c√≥mo se comporta el sistema. ¬°Dib√∫jalo antes de programar! üìä" },
  ],
  'w2_mod14_energia': [ // has 2, need 8
    { titulo: "‚úÖ Quiz: Voltaje de Pilas", tipo: 'mini_quiz', pregunta: "¬øCu√°ntos voltios dan 4 pilas AA en serie?", opciones: ["1.5V", "3V", "6V", "9V"], respuestaCorrecta: 2, explicacion: "Cada pila AA da 1.5V. En serie se suman: 4 √ó 1.5V = 6V. ¬°Perfecto para motores DC! üîã" },
    { titulo: "‚úÖ Quiz: mAh", tipo: 'mini_quiz', pregunta: "¬øQu√© significan los mAh en una bater√≠a?", opciones: ["Mili-amperios hora: cu√°nta energ√≠a puede entregar", "Mega amperios por hora", "Mili-amperes de altura", "Es el modelo de la bater√≠a"], respuestaCorrecta: 0, explicacion: "mAh = miliamperios-hora. Una bater√≠a de 2000mAh puede dar 2000mA por 1 hora, 1000mA por 2 horas, etc. üîã‚è±Ô∏è" },
    { titulo: "‚úÖ Quiz: Consumo de Corriente", tipo: 'mini_quiz', pregunta: "¬øQu√© componente del robot consume M√ÅS corriente?", opciones: ["Los LEDs", "Los sensores", "Los motores", "El Arduino"], respuestaCorrecta: 2, explicacion: "Los motores DC consumen 200-700mA cada uno. El Arduino ~50mA, LEDs ~20mA, sensores ~15mA. ¬°Los motores son los m√°s hambrientos! ‚ö°" },
    { titulo: "‚úÖ Quiz: Autonom√≠a", tipo: 'mini_quiz', pregunta: "Si tu robot consume 500mA y la bater√≠a tiene 2000mAh, ¬øcu√°nto dura?", opciones: ["30 minutos", "2 horas", "4 horas", "8 horas"], respuestaCorrecta: 2, explicacion: "2000mAh √∑ 500mA = 4 horas te√≥ricas. En la pr√°ctica es ~80% de eso por la eficiencia. üîã‚è±Ô∏è" },
    { titulo: "‚úÖ Quiz: Regulador de Voltaje", tipo: 'mini_quiz', pregunta: "¬øPara qu√© sirve un regulador de voltaje en un robot?", opciones: ["Para hacer ruido", "Para mantener un voltaje estable aunque la bater√≠a se vaya descargando", "Para cargar la bater√≠a", "Para medir corriente"], respuestaCorrecta: 1, explicacion: "El regulador mantiene voltaje constante (ej: 5V) protegiendo el Arduino y los sensores de voltajes variables. ‚ö°" },
    { titulo: "‚úÖ‚ùå Energ√≠a: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'Conectar bater√≠as en paralelo aumenta la capacidad (mAh) pero mantiene el voltaje.', correct: true, explain: 'Paralelo = mismo voltaje, m√°s capacidad. Serie = m√°s voltaje, misma capacidad.' }, { text: 'Una bater√≠a LiPo se puede cargar con cualquier cargador.', correct: false, explain: 'Las LiPo necesitan cargadores espec√≠ficos. Cargarlas mal puede causar incendio.' }] },
    { titulo: "üß© Tipos de Bater√≠as", tipo: 'matching_game', instruccion: 'Conecta cada bater√≠a con su caracter√≠stica principal', pairs: [{ left: 'üîã Pilas AA (1.5V)', right: 'Baratas y desechables' }, { left: 'üîã Bater√≠a 9V', right: 'Compacta, poca capacidad' }, { left: '‚ö° LiPo 3.7V', right: 'Recargable y potente' }, { left: 'üîå Power Bank USB', right: 'Recargable, 5V estable' }] },
    { titulo: "‚úÖ Quiz: Ahorro de Energ√≠a", tipo: 'mini_quiz', pregunta: "¬øC√≥mo puede un robot ahorrar energ√≠a para durar m√°s tiempo?", opciones: ["Usando m√°s motores", "Reduciendo velocidad, apagando sensores no usados y usando sleep mode", "No puede ahorrar", "Usando m√°s LEDs"], respuestaCorrecta: 1, explicacion: "¬°Gesti√≥n inteligente! Velocidad reducida, sensores que se encienden solo cuando se necesitan, y modo sleep del Arduino. üí§" },
  ],
  'w2_mod15_integracion': [ // has 1, need 9
    { titulo: "‚úÖ Quiz: Planificaci√≥n de Pines", tipo: 'mini_quiz', pregunta: "¬øPor qu√© es importante hacer una tabla de pines antes de armar el robot?", opciones: ["No es importante", "Para saber qu√© sensores/motores van en qu√© pin y evitar conflictos", "Solo por est√©tica", "Para gastar menos cables"], respuestaCorrecta: 1, explicacion: "Una tabla de pines evita conectar 2 cosas al mismo pin y facilita la programaci√≥n. ¬°Planifica antes de conectar! üìã" },
    { titulo: "‚úÖ Quiz: Conflictos de Pines", tipo: 'mini_quiz', pregunta: "¬øQu√© pasa si conectas un motor y un sensor al mismo pin del Arduino?", opciones: ["Ambos funcionan", "Conflicto: se√±ales se mezclan y nada funciona bien", "El motor gana", "El sensor gana"], respuestaCorrecta: 1, explicacion: "¬°Conflicto! Cada componente necesita su propio pin. Un pin no puede ser INPUT y OUTPUT al mismo tiempo. ‚ö†Ô∏è" },
    { titulo: "‚úÖ Quiz: Orden de Integraci√≥n", tipo: 'mini_quiz', pregunta: "¬øEn qu√© orden debes integrar los subsistemas del robot?", opciones: ["Todo al mismo tiempo", "Probar cada subsistema por separado, luego combinarlos uno a uno", "Empezar por el m√°s dif√≠cil", "Al azar"], respuestaCorrecta: 1, explicacion: "¬°Integraci√≥n incremental! Prueba motores solos, sensores solos, luego combina. Si algo falla, sabes qu√© componente es. üîß" },
    { titulo: "‚úÖ Quiz: Debugging Integrado", tipo: 'mini_quiz', pregunta: "Tu robot integrado no funciona. ¬øCu√°l es el primer paso?", opciones: ["Desarmarlo todo", "Usar Serial.println() para ver qu√© valores leen los sensores", "Comprar uno nuevo", "Cambiar todos los cables"], respuestaCorrecta: 1, explicacion: "Serial.println es tu mejor amigo para debug. Imprime valores de sensores y estados para encontrar el problema. üîç" },
    { titulo: "‚úÖ Quiz: Gesti√≥n de Cables", tipo: 'mini_quiz', pregunta: "¬øCu√°l es una buena pr√°ctica para organizar los cables del robot?", opciones: ["Dejarlos sueltos", "Usar cables de colores ordenados y amarrar con bridas", "Usar un solo color", "No usar cables"], respuestaCorrecta: 1, explicacion: "Convenci√≥n: rojo=VCC, negro=GND, otros colores=se√±ales. Cables ordenados = menos errores y mantenimiento f√°cil. üîå" },
    { titulo: "‚úÖ‚ùå Integraci√≥n: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'Antes de integrar todo, cada subsistema debe funcionar perfecto por separado.', correct: true, explain: 'Si un componente no funciona solo, tampoco funcionar√° integrado. Prueba primero individualmente.' }, { text: 'La integraci√≥n siempre funciona a la primera sin problemas.', correct: false, explain: 'Casi nunca funciona a la primera. Los conflictos de pines, alimentaci√≥n y timing son comunes.' }] },
    { titulo: "üß© Subsistemas del Robot", tipo: 'matching_game', instruccion: 'Conecta cada subsistema con sus componentes', pairs: [{ left: 'Navegaci√≥n', right: 'Motores + driver L298N' }, { left: 'Percepci√≥n', right: 'Sensor ultras√≥nico + IR' }, { left: 'Comunicaci√≥n', right: 'Bluetooth + LCD' }, { left: 'Alimentaci√≥n', right: 'Bater√≠as + regulador' }] },
    { titulo: "‚úÖ Quiz: Prioridad de Alimentaci√≥n", tipo: 'mini_quiz', pregunta: "Si tu robot tiene bater√≠a baja y no puede alimentar todo, ¬øqu√© deber√≠a tener prioridad?", opciones: ["Los LEDs decorativos", "El cerebro (Arduino) y los sensores de seguridad", "El buzzer", "La pantalla LCD"], respuestaCorrecta: 1, explicacion: "¬°Seguridad primero! El cerebro y sensores cr√≠ticos tienen prioridad. LEDs y display son complementarios. ‚ö°" },
    { titulo: "‚úÖ Quiz: Testing Final", tipo: 'mini_quiz', pregunta: "¬øQu√© prueba debes hacer ANTES de la demostraci√≥n final de tu robot?", opciones: ["Ninguna, confiar en que funciona", "Prueba completa en condiciones similares a la demostraci√≥n", "Solo verificar que enciende", "Solo probar los LEDs"], respuestaCorrecta: 1, explicacion: "¬°Prueba en las mismas condiciones! Superficie, iluminaci√≥n y distancias similares. ¬°Evita sorpresas en la demo! üéØ" },
  ],
  'w2_mod16_proyecto_final': [ // has 1, need 9
    { titulo: "‚úÖ Quiz: Objetivo del Proyecto", tipo: 'mini_quiz', pregunta: "¬øCu√°l es el primer paso para el proyecto final de robot aut√≥nomo?", opciones: ["Comprar todo", "Definir claramente qu√© debe hacer el robot y sus requisitos", "Empezar a programar", "Copiar otro proyecto"], respuestaCorrecta: 1, explicacion: "Define los requisitos: ¬øqu√© misi√≥n tiene? ¬øqu√© sensores necesita? ¬øcu√°nto debe durar la bater√≠a? ¬°Planifica! üìã" },
    { titulo: "‚úÖ Quiz: Lista de Materiales", tipo: 'mini_quiz', pregunta: "¬øQu√© debe incluir la lista de materiales (BOM) de un proyecto?", opciones: ["Solo los nombres", "Componente, cantidad, costo y d√≥nde comprarlo", "Solo el costo total", "Solo las fotos"], respuestaCorrecta: 1, explicacion: "BOM = Bill Of Materials. Lista completa con cada componente, cu√°ntos necesitas, cu√°nto cuestan y d√≥nde conseguirlos. üìù" },
    { titulo: "‚úÖ Quiz: Esquema El√©ctrico", tipo: 'mini_quiz', pregunta: "¬øPor qu√© es importante hacer un esquema el√©ctrico antes de armar el robot?", opciones: ["Solo por est√©tica", "Para visualizar todas las conexiones y evitar errores", "No es necesario", "Para impresionar"], respuestaCorrecta: 1, explicacion: "El esquema el√©ctrico es el mapa de conexiones. Sin √©l, los errores de cableado son muy probables. ¬°Herramientas como Fritzing ayudan! üîå" },
    { titulo: "‚úÖ Quiz: Pruebas Incrementales", tipo: 'mini_quiz', pregunta: "¬øQu√© significa hacer pruebas incrementales durante el montaje?", opciones: ["Probar solo al final", "Probar cada componente al agregarlo, antes de agregar el siguiente", "No hacer pruebas", "Probar todo de golpe"], respuestaCorrecta: 1, explicacion: "¬°Probar paso a paso! Agrega un componente ‚Üí prueba ‚Üí funciona ‚Üí agrega el siguiente. As√≠ identificas errores r√°pido. üîß" },
    { titulo: "‚úÖ Quiz: Presentaci√≥n del Proyecto", tipo: 'mini_quiz', pregunta: "¬øQu√© elementos debe tener una buena presentaci√≥n del proyecto final?", opciones: ["Solo el robot encendido", "Objetivo, proceso, demo en vivo, resultados y mejoras futuras", "Solo fotos", "Solo el c√≥digo"], respuestaCorrecta: 1, explicacion: "Una presentaci√≥n completa: ¬øqu√©? ¬øc√≥mo? ¬øfunciona? ¬øqu√© aprendiste? ¬øqu√© mejorar√≠as? ¬°S√© un ingeniero profesional! üé§" },
    { titulo: "‚úÖ‚ùå Proyecto Final: ¬øV o F?", tipo: 'true_false', statements: [{ text: 'Documentar el proceso de construcci√≥n con fotos y notas es innecesario.', correct: false, explain: 'La documentaci√≥n es fundamental: permite replicar, mejorar y compartir el proyecto.' }, { text: 'Es normal que el primer prototipo tenga errores que hay que corregir.', correct: true, explain: 'Los mejores ingenieros iteran: v1 con errores ‚Üí v2 mejorada ‚Üí v3 optimizada.' }] },
    { titulo: "üß© Fases del Proyecto", tipo: 'matching_game', instruccion: 'Ordena las fases del proyecto final', pairs: [{ left: '1Ô∏è‚É£ Fase 1', right: 'Dise√±o y planificaci√≥n' }, { left: '2Ô∏è‚É£ Fase 2', right: 'Montaje del hardware' }, { left: '3Ô∏è‚É£ Fase 3', right: 'Programaci√≥n y testing' }, { left: '4Ô∏è‚É£ Fase 4', right: 'Presentaci√≥n y mejoras' }] },
    { titulo: "‚úÖ Quiz: Errores Comunes", tipo: 'mini_quiz', pregunta: "¬øCu√°l es el error m√°s com√∫n al construir un robot por primera vez?", opciones: ["Usar demasiados sensores", "No verificar la alimentaci√≥n el√©ctrica y conexiones sueltas", "Programar demasiado", "Usar cables de colores"], respuestaCorrecta: 1, explicacion: "El 80% de los problemas son el√©ctricos: cables sueltos, polaridad incorrecta o alimentaci√≥n insuficiente. ¬°Revisa las conexiones! ‚ö°" },
    { titulo: "‚úÖ Quiz: Mejoras Futuras", tipo: 'mini_quiz', pregunta: "Tu robot funciona pero es lento en las curvas. ¬øQu√© mejora implementar√≠as?", opciones: ["Quitar sensores", "Implementar control PID para giros m√°s suaves y r√°pidos", "Hacerlo m√°s pesado", "Nada, est√° perfecto"], respuestaCorrecta: 1, explicacion: "¬°PID! Un controlador proporcional-integral-derivativo ajusta la velocidad de los motores para giros suaves y precisos. üéØ" },
  ],
};

console.log('=== WORLD 2 ===');
injectQuestions('src/data/world2Data.js', W2);

console.log('Done with World 2!');
