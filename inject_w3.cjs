const fs = require('fs');

let lines = fs.readFileSync('src/data/world3Data.js', 'utf8').split('\n');

const questions = {
  'w3_mod1_biomimetica': [
    `            { titulo: "âœ… Quiz: Velcro BiomimÃ©tico", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© planta inspirÃ³ la invenciÃ³n del Velcro?", opciones: ["Rosa", "Bardana (sus semillas con ganchos microscÃ³picos)", "Girasol", "Cactus"], respuestaCorrecta: 1, explicacion: "George de Mestral observÃ³ cÃ³mo las semillas de bardana se pegaban al pelo de su perro. Los ganchos microscÃ³picos inspiraron el Velcro. ğŸ•" },`,
    `            { titulo: "âœ… Quiz: EvoluciÃ³n como DiseÃ±adora", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡ntos aÃ±os de 'prueba y error' tiene la evoluciÃ³n natural?", opciones: ["1,000 aÃ±os", "1 millÃ³n de aÃ±os", "MÃ¡s de 3,800 millones de aÃ±os", "100 aÃ±os"], respuestaCorrecta: 2, explicacion: "La vida lleva ~3,800 millones de aÃ±os evolucionando. Cada organismo es un diseÃ±o optimizado por selecciÃ³n natural. ğŸ§¬" },`,
    `            { titulo: "âœ… Quiz: Gecko Robot", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© tecnologÃ­a robÃ³tica se inspirÃ³ en las patas del gecko?", opciones: ["Motores mÃ¡s rÃ¡pidos", "Adhesivos secos que permiten escalar paredes lisas", "CÃ¡maras infrarrojas", "Paneles solares"], respuestaCorrecta: 1, explicacion: "Las patas del gecko usan fuerzas de Van der Waals con millones de pelos microscÃ³picos. Se replicÃ³ en robots escaladores. ğŸ¦" },`,
    `            { titulo: "âœ… Quiz: Tren Bala BiomimÃ©tico", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© ave inspirÃ³ el diseÃ±o del tren bala Shinkansen?", opciones: ["Ãguila", "MartÃ­n pescador (su pico reduce la resistencia del aire)", "PingÃ¼ino", "ColibrÃ­"], respuestaCorrecta: 1, explicacion: "El pico del martÃ­n pescador corta el agua sin salpicar. El tren bala copiÃ³ esa forma para reducir el boom sÃ³nico al salir de tÃºneles. ğŸš„" },`,
  ],
  'w3_mod2_locomocion': [
    `            { titulo: "âœ… Quiz: Patas vs Ruedas", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡ndo son mejores las patas que las ruedas en un robot?", opciones: ["Siempre", "En terreno irregular, escaleras y superficies con obstÃ¡culos", "Nunca", "Solo en superficies planas"], respuestaCorrecta: 1, explicacion: "Las patas superan a las ruedas en terreno irregular: pueden pisar sobre obstÃ¡culos, subir escaleras y adaptarse al terreno. ğŸ¦¿" },`,
    `            { titulo: "âœ… Quiz: LocomociÃ³n Serpentina", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© ventaja tiene la locomociÃ³n serpentina (como una serpiente)?", opciones: ["Es mÃ¡s rÃ¡pida", "Puede entrar en espacios estrechos y moverse sin patas", "Es mÃ¡s fÃ¡cil de programar", "Usa menos energÃ­a siempre"], respuestaCorrecta: 1, explicacion: "Los robots serpiente pueden entrar en tuberÃ­as, escombros y espacios reducidos donde otros robots no caben. Perfectos para rescate. ğŸ" },`,
    `            { titulo: "âœ… Quiz: Robot HexÃ¡podo", tipo: 'mini_quiz', pregunta: "Â¿Por quÃ© muchos robots caminantes usan 6 patas (hexÃ¡podos)?", opciones: ["Porque se ven mejor", "Porque pueden mantener siempre 3 patas en el suelo (trÃ­pode alterno)", "Porque son mÃ¡s baratos", "Porque van mÃ¡s rÃ¡pido"], respuestaCorrecta: 1, explicacion: "Con 6 patas, el robot puede caminar con trÃ­pode alterno: 3 patas apoyadas, 3 en el aire. MÃ¡xima estabilidad sin caerse. ğŸ•·ï¸" },`,
    `            { titulo: "âœ… Quiz: Nado RobÃ³tico", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© animal inspirÃ³ los robots submarinos mÃ¡s eficientes?", opciones: ["Ballena", "AtÃºn y otros peces que usan la cola para propulsiÃ³n", "Cangrejo", "Oso polar"], respuestaCorrecta: 1, explicacion: "Los peces como el atÃºn son increÃ­blemente eficientes. El robot RoboTuna del MIT copia su movimiento de cola para nadar con mÃ­nima energÃ­a. ğŸŸ" },`,
  ],
  'w3_mod3_musculos_artificiales': [
    `            { titulo: "âœ… Quiz: SMA (AleaciÃ³n con Memoria)", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© hace especial a una aleaciÃ³n con memoria de forma (SMA)?", opciones: ["Brilla en la oscuridad", "Se deforma y vuelve a su forma original al calentarse", "Es mÃ¡s pesada que el acero", "Solo existe en laboratorios"], respuestaCorrecta: 1, explicacion: "Los alambres SMA (como Nitinol) se contraen al calentarse y vuelven a su forma. Son mÃºsculos artificiales ligeros y silenciosos. ğŸ”¥" },`,
    `            { titulo: "âœ… Quiz: Actuadores NeumÃ¡ticos", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© usan los mÃºsculos neumÃ¡ticos artificiales (McKibben) para generar fuerza?", opciones: ["Electricidad", "Aire comprimido que infla una malla trenzada", "Imanes", "Resortes"], respuestaCorrecta: 1, explicacion: "Los mÃºsculos McKibben se inflan con aire comprimido. La malla trenzada se acorta al inflarse, generando fuerza como un bÃ­ceps. ğŸ’ª" },`,
    `            { titulo: "âœ… Quiz: EAP", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© son los polÃ­meros electroactivos (EAP)?", opciones: ["PlÃ¡sticos reciclados", "Materiales que cambian de forma al aplicarles voltaje", "Cables elÃ©ctricos", "Sensores de presiÃ³n"], respuestaCorrecta: 1, explicacion: "Los EAP son plÃ¡sticos que se deforman con electricidad. Son los mÃºsculos artificiales mÃ¡s parecidos a los biolÃ³gicos. Ligeros y flexibles. ğŸ”¬" },`,
    `            { titulo: "âœ… Quiz: HidrÃ¡ulica vs NeumÃ¡tica", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡l es la diferencia principal entre actuadores hidrÃ¡ulicos y neumÃ¡ticos?", opciones: ["No hay diferencia", "Los hidrÃ¡ulicos usan lÃ­quido (mÃ¡s fuerza) y los neumÃ¡ticos usan aire (mÃ¡s velocidad)", "Los hidrÃ¡ulicos son mÃ¡s baratos", "Los neumÃ¡ticos son mÃ¡s pesados"], respuestaCorrecta: 1, explicacion: "Â¡LÃ­quido vs aire! Los hidrÃ¡ulicos dan mÃ¡s fuerza (excavadoras), los neumÃ¡ticos son mÃ¡s rÃ¡pidos y limpios (robots industriales). âš™ï¸" },`,
  ],
  'w3_mod4_sentidos_bio': [
    `            { titulo: "âœ… Quiz: Electro-recepciÃ³n", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© sentido tiene el tiburÃ³n que se ha copiado en robots?", opciones: ["Super vista", "Electro-recepciÃ³n: detectar campos elÃ©ctricos de otros seres vivos", "Super olfato", "EcolocalizaciÃ³n"], respuestaCorrecta: 1, explicacion: "Los tiburones detectan los campos elÃ©ctricos de sus presas. Robots submarinos copian esto para navegar y detectar objetos metÃ¡licos. âš¡ğŸ¦ˆ" },`,
    `            { titulo: "âœ… Quiz: VisiÃ³n Compuesta", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© ventaja tiene la visiÃ³n compuesta de los insectos para robots?", opciones: ["Ven en color", "Campo visual de casi 360Â° y detecciÃ³n ultra-rÃ¡pida de movimiento", "Ven mÃ¡s lejos", "Ven en la oscuridad"], respuestaCorrecta: 1, explicacion: "Los ojos compuestos de las moscas tienen miles de lentes. Detectan movimiento en milisegundos. Inspiraron cÃ¡maras robÃ³ticas panorÃ¡micas. ğŸª°" },`,
    `            { titulo: "âœ… Quiz: LÃ­nea Lateral", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© sentido de los peces se replica en robots submarinos?", opciones: ["Gusto", "LÃ­nea lateral: detecta vibraciones y corrientes en el agua", "Tacto", "OÃ­do"], respuestaCorrecta: 1, explicacion: "La lÃ­nea lateral de los peces detecta presiÃ³n y movimiento del agua. Robots submarinos la copian para navegar sin visiÃ³n. ğŸ " },`,
    `            { titulo: "âœ… Quiz: Bigotes de Rata", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© sensores robÃ³ticos se inspiraron en los bigotes (vibrisas) de las ratas?", opciones: ["CÃ¡maras", "Sensores tÃ¡ctiles de alta sensibilidad para detectar texturas y formas", "MicrÃ³fonos", "Sensores de gas"], respuestaCorrecta: 1, explicacion: "Las vibrisas de las ratas detectan textura, forma y movimiento del aire. Robots con bigotes artificiales navegan en oscuridad total. ğŸ€" },`,
  ],
  'w3_mod5_protesis_intro': [
    `            { titulo: "âœ… Quiz: PrÃ³tesis MioelÃ©ctricas", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo se controlan las prÃ³tesis mioelÃ©ctricas?", opciones: ["Con botones", "Detectando las seÃ±ales elÃ©ctricas de los mÃºsculos del usuario (EMG)", "Con control remoto", "Con la voz"], respuestaCorrecta: 1, explicacion: "Los sensores EMG detectan la actividad elÃ©ctrica de los mÃºsculos restantes. El usuario piensa en mover la mano y la prÃ³tesis responde. ğŸ¦¾" },`,
    `            { titulo: "âœ… Quiz: RetroalimentaciÃ³n Sensorial", tipo: 'mini_quiz', pregunta: "Â¿Por quÃ© es importante que una prÃ³tesis tenga sensores de presiÃ³n?", opciones: ["Para verse moderna", "Para que el usuario sienta cuÃ¡nta fuerza aplica y no rompa objetos", "Para conectarse a Internet", "No es importante"], respuestaCorrecta: 1, explicacion: "Sin retroalimentaciÃ³n, el usuario no sabe si aplasta un huevo o sostiene bien una taza. Los sensores cierran el ciclo sensorial. ğŸ¥š" },`,
    `            { titulo: "âœ… Quiz: ImpresiÃ³n 3D de PrÃ³tesis", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo ha revolucionado la impresiÃ³n 3D las prÃ³tesis?", opciones: ["No ha cambiado nada", "Reduce el costo de $50,000 a menos de $50 y permite personalizaciÃ³n", "Solo las hace mÃ¡s bonitas", "Las hace mÃ¡s pesadas"], respuestaCorrecta: 1, explicacion: "Proyectos como e-NABLE imprimen prÃ³tesis de mano por menos de $50. Antes costaban miles de dÃ³lares. Â¡Acceso para todos! ğŸ–¨ï¸" },`,
    `            { titulo: "âœ… Quiz: Grados de Libertad PrÃ³tesis", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡ntos grados de libertad tiene una mano humana real?", opciones: ["5", "27 (considerando todas las articulaciones)", "10", "3"], respuestaCorrecta: 1, explicacion: "La mano humana tiene 27 grados de libertad. Las mejores prÃ³tesis actuales logran 6-8 DOF. Â¡AÃºn hay mucho por mejorar! ğŸ¤š" },`,
  ],
  'w3_mod6_exoesqueletos': [
    `            { titulo: "âœ… Quiz: Tipos de Exoesqueletos", tipo: 'mini_quiz', pregunta: "Â¿Para quÃ© se usan los exoesqueletos en rehabilitaciÃ³n mÃ©dica?", opciones: ["Solo para levantar peso", "Para ayudar a pacientes con lesiones medulares a caminar de nuevo", "Para militares solamente", "Para deportes"], respuestaCorrecta: 1, explicacion: "Exoesqueletos como ReWalk permiten que personas con parÃ¡lisis caminen. Los motores mueven las piernas siguiendo patrones de marcha. ğŸš¶" },`,
    `            { titulo: "âœ… Quiz: Exo Industrial", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© problema resuelven los exoesqueletos en fÃ¡bricas?", opciones: ["Que los trabajadores corran mÃ¡s rÃ¡pido", "Reducen lesiones de espalda al levantar cargas pesadas repetidamente", "Mejoran la vista", "No resuelven nada"], respuestaCorrecta: 1, explicacion: "Los exoesqueletos industriales (como los de Ford para trabajadores) reducen la fatiga muscular un 40% y previenen lesiones laborales. ğŸ­" },`,
    `            { titulo: "âœ… Quiz: HAL Exoesqueleto", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© hace especial al exoesqueleto HAL de Cyberdyne?", opciones: ["Es el mÃ¡s barato", "Lee seÃ±ales nerviosas del cerebro antes de que el mÃºsculo se mueva", "Solo funciona en agua", "Es invisible"], respuestaCorrecta: 1, explicacion: "HAL detecta las seÃ±ales bioelÃ©ctricas del cerebro 0.01s ANTES de que el mÃºsculo actÃºe. Se anticipa al movimiento del usuario. ğŸ§ " },`,
  ],
  'w3_mod7_wearables': [
    `            { titulo: "âœ… Quiz: Sensores Wearables", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© datos pueden medir los wearables de salud?", opciones: ["Solo la hora", "Ritmo cardÃ­aco, oxÃ­geno en sangre, temperatura y actividad", "Solo los pasos", "Solo la presiÃ³n"], respuestaCorrecta: 1, explicacion: "Los smartwatches modernos miden: ritmo cardÃ­aco (PPG), SpO2, temperatura, pasos, sueÃ±o y hasta ECG. Â¡Un hospital en la muÃ±eca! âŒš" },`,
    `            { titulo: "âœ… Quiz: PPG Sensor", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo mide un smartwatch el ritmo cardÃ­aco?", opciones: ["Con un micrÃ³fono", "Con un LED verde que detecta cambios de flujo sanguÃ­neo (fotopletismografÃ­a)", "Con presiÃ³n", "Con ultrasonido"], respuestaCorrecta: 1, explicacion: "PPG: un LED verde ilumina la piel. La sangre absorbe mÃ¡s luz verde cuando el corazÃ³n bombea. El sensor detecta los pulsos. ğŸ’š" },`,
    `            { titulo: "âœ… Quiz: IMU Wearable", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© es un IMU y para quÃ© se usa en wearables?", opciones: ["Un tipo de baterÃ­a", "Unidad de MediciÃ³n Inercial: acelerÃ³metro + giroscopio para detectar movimiento", "Un procesador", "Una pantalla"], respuestaCorrecta: 1, explicacion: "IMU = acelerÃ³metro + giroscopio (+ magnetÃ³metro). Detecta orientaciÃ³n, pasos, caÃ­das y gestos. Esencial en smartwatches y VR. ğŸ“" },`,
    `            { titulo: "âœ… Quiz: Textiles Inteligentes", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© son los e-textiles o textiles inteligentes?", opciones: ["Ropa cara", "Telas con sensores y circuitos integrados que miden datos del cuerpo", "Ropa que brilla", "Telas impermeables"], respuestaCorrecta: 1, explicacion: "Los e-textiles integran sensores y conductores en la tela. Miden movimiento, presiÃ³n, temperatura y hasta seÃ±ales musculares. Â¡Ropa robÃ³tica! ğŸ‘•" },`,
  ],
  'w3_mod8_interfaz_cerebro': [
    `            { titulo: "âœ… Quiz: EEG", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© mide un electroencefalograma (EEG)?", opciones: ["La presiÃ³n arterial", "La actividad elÃ©ctrica del cerebro mediante electrodos en el cuero cabelludo", "La temperatura", "El oxÃ­geno"], respuestaCorrecta: 1, explicacion: "El EEG detecta ondas cerebrales (alfa, beta, delta, theta). Se usan en BCIs para que personas con parÃ¡lisis controlen dispositivos. ğŸ§ " },`,
    `            { titulo: "âœ… Quiz: BCI Invasivo vs No Invasivo", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡l es la diferencia entre una BCI invasiva y no invasiva?", opciones: ["No hay diferencia", "La invasiva implanta electrodos en el cerebro; la no invasiva usa sensores externos", "La invasiva es mÃ¡s barata", "La no invasiva es mÃ¡s precisa"], respuestaCorrecta: 1, explicacion: "Las BCIs invasivas (como Neuralink) dan seÃ±ales mÃ¡s precisas, pero requieren cirugÃ­a. Las no invasivas (EEG) son seguras pero menos precisas. âš•ï¸" },`,
    `            { titulo: "âœ… Quiz: Ondas Cerebrales", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© tipo de onda cerebral indica concentraciÃ³n intensa?", opciones: ["Ondas delta (sueÃ±o profundo)", "Ondas beta (actividad mental enfocada)", "Ondas alfa (relajaciÃ³n)", "Ondas theta (somnolencia)"], respuestaCorrecta: 1, explicacion: "Ondas beta (13-30 Hz) = concentraciÃ³n. Las BCIs pueden detectar cuÃ¡ndo te concentras y usar eso como comando. Â¡Controlar con la mente! ğŸ¯" },`,
    `            { titulo: "âœ… Quiz: Aplicaciones BCI", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© pueden hacer las interfaces cerebro-computadora actualmente?", opciones: ["Leer pensamientos completos", "Mover cursores, escribir texto, controlar sillas de ruedas y prÃ³tesis", "Teletransportar objetos", "Nada prÃ¡ctico todavÃ­a"], respuestaCorrecta: 1, explicacion: "Las BCIs actuales permiten escribir texto, mover cursores, controlar prÃ³tesis y sillas de ruedas. Â¡Revolucionario para personas con discapacidad! ğŸ–¥ï¸" },`,
  ],
  'w3_mod9_robots_blandos': [
    `            { titulo: "âœ… Quiz: Materiales Blandos", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© material principal se usa en robots blandos?", opciones: ["Acero", "Silicona y elastÃ³meros flexibles", "Madera", "Vidrio"], respuestaCorrecta: 1, explicacion: "Los robots blandos usan silicona, caucho y elastÃ³meros. Se deforman sin romperse y se adaptan a cualquier forma. Â¡Como un pulpo! ğŸ™" },`,
    `            { titulo: "âœ… Quiz: ActuaciÃ³n NeumÃ¡tica Blanda", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo se mueve un robot blando neumÃ¡tico?", opciones: ["Con motores elÃ©ctricos", "Inflando y desinflando cÃ¡maras de aire dentro de su cuerpo flexible", "Con ruedas internas", "Con imanes"], respuestaCorrecta: 1, explicacion: "Las cÃ¡maras de aire se inflan selectivamente, causando que el cuerpo flexible se curve o extienda. Â¡Como los tentÃ¡culos de un pulpo! ğŸ«§" },`,
    `            { titulo: "âœ… Quiz: Ventajas de Robots Blandos", tipo: 'mini_quiz', pregunta: "Â¿En quÃ© situaciÃ³n es mejor un robot blando que uno rÃ­gido?", opciones: ["Siempre", "Manipulando objetos frÃ¡giles como frutas o trabajando cerca de humanos", "Nunca", "Solo en el espacio"], respuestaCorrecta: 1, explicacion: "Los robots blandos son inherentemente seguros: no pueden lastimar personas ni aplastar objetos delicados. Perfectos para agricultura y medicina. ğŸ…" },`,
    `            { titulo: "âœ… Quiz: Octobot", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© hizo especial al Octobot de Harvard?", opciones: ["Era muy grande", "Fue el primer robot completamente blando sin ningÃºn componente rÃ­gido", "Era el mÃ¡s rÃ¡pido", "PodÃ­a volar"], respuestaCorrecta: 1, explicacion: "El Octobot (2016) fue 100% blando: sin baterÃ­as, cables ni chips rÃ­gidos. Usa reacciones quÃ­micas para moverse. Â¡RevoluciÃ³n robÃ³tica! ğŸ™" },`,
  ],
  'w3_mod10_bioimpresion': [
    `            { titulo: "âœ… Quiz: Bioink", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© es el bio-ink (bio-tinta) en bioimpresiÃ³n 3D?", opciones: ["Tinta de colores", "Una mezcla de cÃ©lulas vivas y biomateriales que se imprime capa a capa", "Pintura para robots", "Tinta de impresora normal"], respuestaCorrecta: 1, explicacion: "El bio-ink contiene cÃ©lulas vivas mezcladas con hidrogeles. La bioimpresora las deposita capa a capa para crear tejidos. Â¡Imprimir vida! ğŸ§¬" },`,
    `            { titulo: "âœ… Quiz: Aplicaciones BioimpresiÃ³n", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© se ha logrado bioiprimir exitosamente hasta ahora?", opciones: ["Cerebros completos", "CartÃ­lago de oreja, piel, vasos sanguÃ­neos y mini-Ã³rganos (organoides)", "Corazones funcionales completos", "Robots vivientes"], respuestaCorrecta: 1, explicacion: "Se han bioimpreso orejas de cartÃ­lago, parches de piel, vasos y organoides para pruebas de fÃ¡rmacos. Ã“rganos completos son el futuro. ğŸ–¨ï¸" },`,
    `            { titulo: "âœ… Quiz: Xenobot", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© son los Xenobots?", opciones: ["Robots de metal", "Organismos vivos diseÃ±ados por computadora a partir de cÃ©lulas de rana", "Programa de computadora", "Bacterias genÃ©ticamente modificadas"], respuestaCorrecta: 1, explicacion: "Los Xenobots son 'robots vivientes' creados en 2020 con cÃ©lulas de rana Xenopus. Pueden moverse, autorrepararse y hasta replicarse. ğŸ¸" },`,
    `            { titulo: "âœ… Quiz: Scaffold", tipo: 'mini_quiz', pregunta: "Â¿Para quÃ© sirve el scaffold (andamiaje) en bioimpresiÃ³n?", opciones: ["Para decorar", "Como estructura temporal donde las cÃ©lulas crecen y forman el tejido", "Para proteger el robot", "Para almacenar datos"], respuestaCorrecta: 1, explicacion: "El scaffold es como los andamios de un edificio: da forma mientras las cÃ©lulas crecen y se organizan. Luego el scaffold se degrada. ğŸ—ï¸" },`,
  ],
  'w3_mod11_ecosistemas': [
    `            { titulo: "âœ… Quiz: Robots Ambientales", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo ayudan los robots a proteger ecosistemas?", opciones: ["Destruyendo plagas", "Monitoreando fauna, midiendo contaminaciÃ³n y plantando Ã¡rboles automÃ¡ticamente", "No ayudan", "Solo en zoolÃ³gicos"], respuestaCorrecta: 1, explicacion: "Robots como drones plantan 10,000 Ã¡rboles/dÃ­a, monitorean especies en peligro y miden calidad del agua y aire. Â¡Guardianes tecnolÃ³gicos! ğŸŒ³" },`,
    `            { titulo: "âœ… Quiz: Robot Coral", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© hace el robot LarvalBot en los arrecifes de coral?", opciones: ["Destruye coral", "Distribuye larvas de coral para restaurar arrecifes daÃ±ados", "Pesca automÃ¡ticamente", "Mide la profundidad"], respuestaCorrecta: 1, explicacion: "LarvalBot distribuye larvas de coral sobre arrecifes daÃ±ados. Un solo robot puede cubrir Ã¡reas enormes, acelerando la restauraciÃ³n marina. ğŸª¸" },`,
    `            { titulo: "âœ… Quiz: RobÃ³tica AgrÃ­cola", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© tarea agrÃ­cola pueden hacer los robots mejor que los humanos?", opciones: ["Ninguna", "Cosecha selectiva 24/7 identificando frutos maduros con visiÃ³n artificial", "Solo arar", "Solo regar"], respuestaCorrecta: 1, explicacion: "Robots con visiÃ³n artificial identifican frutas maduras y las cosechan delicadamente. Trabajan 24/7 sin fatiga y reducen desperdicio. ğŸ“" },`,
    `            { titulo: "âœ… Quiz: Drones Antiincendios", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo ayudan los drones en la prevenciÃ³n de incendios forestales?", opciones: ["Apagando fuegos con agua", "Detectando puntos calientes con cÃ¡maras tÃ©rmicas antes de que el fuego se propague", "No ayudan", "Cortando Ã¡rboles"], respuestaCorrecta: 1, explicacion: "Los drones con cÃ¡maras tÃ©rmicas e IR detectan puntos calientes invisibles al ojo humano. Alertan antes de que el fuego crezca. ğŸ”¥" },`,
  ],
  'w3_mod12_enjambres': [
    `            { titulo: "âœ… Quiz: Reglas de Enjambre", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡les son las 3 reglas bÃ¡sicas de comportamiento de enjambre (boids)?", opciones: ["Atacar, defender, huir", "SeparaciÃ³n, alineaciÃ³n y cohesiÃ³n", "Avanzar, girar, parar", "Subir, bajar, flotar"], respuestaCorrecta: 1, explicacion: "Las 3 reglas de Craig Reynolds: separaciÃ³n (no chocar), alineaciÃ³n (ir en la misma direcciÃ³n) y cohesiÃ³n (mantenerse juntos). Emerge orden del caos. ğŸ¦" },`,
    `            { titulo: "âœ… Quiz: Kilobots", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© demostrÃ³ el experimento con 1,024 Kilobots de Harvard?", opciones: ["Que los robots son caros", "Que robots simples pueden formar patrones complejos cooperando sin control central", "Que necesitan GPS", "Que solo funcionan solos"], respuestaCorrecta: 1, explicacion: "1,024 Kilobots simples formaron estrellas, letras y formas complejas SIN ningÃºn lÃ­der. Solo comunicaciÃ³n local entre vecinos. Â¡Inteligencia emergente! â­" },`,
    `            { titulo: "âœ… Quiz: Ventajas del Enjambre", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡l es la mayor ventaja de usar un enjambre de robots en vez de uno grande?", opciones: ["Son mÃ¡s bonitos", "Redundancia: si uno falla, los demÃ¡s continÃºan la misiÃ³n", "Son mÃ¡s rÃ¡pidos", "Usan menos energÃ­a total"], respuestaCorrecta: 1, explicacion: "Si un robot del enjambre falla, los demÃ¡s se reorganizan y completan la tarea. Un robot grande que falla = misiÃ³n cancelada. ğŸ”„" },`,
    `            { titulo: "âœ… Quiz: ComunicaciÃ³n Local", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo se comunican los robots de un enjambre tÃ­picamente?", opciones: ["Por Internet", "Solo con sus vecinos cercanos usando IR, radio o WiFi de corto alcance", "Por satÃ©lite", "Con cables"], respuestaCorrecta: 1, explicacion: "Cada robot solo 'habla' con sus vecinos inmediatos. No hay un computador central. El comportamiento global emerge de interacciones locales. ğŸ“¡" },`,
  ],
  'w3_mod13_micro_robots': [
    `            { titulo: "âœ… Quiz: Nanorobots MÃ©dicos", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡l es la aplicaciÃ³n mÃ¡s prometedora de los nanorobots?", opciones: ["Construir edificios", "Entregar medicamentos directamente a cÃ©lulas enfermas dentro del cuerpo", "Limpiar casas", "Cocinar"], respuestaCorrecta: 1, explicacion: "Los nanorobots mÃ©dicos podrÃ­an llevar quimioterapia directamente a cÃ©lulas cancerosas, sin afectar tejido sano. Â¡Medicina de precisiÃ³n! ğŸ’Š" },`,
    `            { titulo: "âœ… Quiz: MEMS", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© son los MEMS y dÃ³nde los encuentras?", opciones: ["Memorias de computador", "Sistemas Micro-ElectromecÃ¡nicos: sensores diminutos en celulares y autos", "Un tipo de robot grande", "Cables microscÃ³picos"], respuestaCorrecta: 1, explicacion: "MEMS = sensores y actuadores microscÃ³picos. Tu celular tiene ~10 MEMS: acelerÃ³metro, giroscopio, micrÃ³fono, barÃ³metro... ğŸ“±" },`,
    `            { titulo: "âœ… Quiz: PropulsiÃ³n Micro", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo se mueven los microrobots dentro del cuerpo humano?", opciones: ["Con ruedas", "Con flagelos magnÃ©ticos, reacciones quÃ­micas o campos magnÃ©ticos externos", "Con hÃ©lices", "Con cohetes"], respuestaCorrecta: 1, explicacion: "Los microrobots usan flagelos (como bacterias), burbujas quÃ­micas o son guiados por imanes externos. Â¡Navegar por el torrente sanguÃ­neo! ğŸ§²" },`,
    `            { titulo: "âœ… Quiz: Escala Micro", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© desafÃ­o especial enfrentan los robots a escala micromÃ©trica?", opciones: ["Son muy caros", "Las fuerzas de superficie (adhesiÃ³n, viscosidad) dominan sobre la gravedad", "No tienen color", "Son demasiado rÃ¡pidos"], respuestaCorrecta: 1, explicacion: "A escala micro, las fuerzas de Van der Waals y la viscosidad del fluido dominan. Un microrobot 'nada' en fluido como tÃº nadarÃ­as en miel. ğŸ”¬" },`,
  ],
  'w3_mod14_bioetica': [
    `            { titulo: "âœ… Quiz: Principios BioÃ©ticos", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡les son los principios fundamentales de la bioÃ©tica en robÃ³tica?", opciones: ["Solo ganar dinero", "Beneficencia, no maleficencia, autonomÃ­a y justicia", "Solo seguridad", "No hay principios"], respuestaCorrecta: 1, explicacion: "Los 4 principios: hacer el bien (beneficencia), no hacer daÃ±o (no maleficencia), respetar decisiones (autonomÃ­a) y acceso equitativo (justicia). âš–ï¸" },`,
    `            { titulo: "âœ… Quiz: Sesgo en IA", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© es el sesgo algorÃ­tmico en robots con IA?", opciones: ["Un error de hardware", "Cuando la IA toma decisiones injustas basadas en datos de entrenamiento sesgados", "Un tipo de sensor", "No existe"], respuestaCorrecta: 1, explicacion: "Si una IA se entrena con datos sesgados, discrimina. Un robot mÃ©dico podrÃ­a dar peor servicio a ciertos grupos. La diversidad en datos es crucial. ğŸ”" },`,
    `            { titulo: "âœ… Quiz: Derecho a la Privacidad", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© problema Ã©tico generan los robots con cÃ¡maras y micrÃ³fonos en el hogar?", opciones: ["Ninguno", "Pueden grabar y almacenar datos privados sin consentimiento adecuado", "Solo estÃ©tico", "Usan mucha electricidad"], respuestaCorrecta: 1, explicacion: "Los robots domÃ©sticos con sensores pueden recopilar datos Ã­ntimos. Es crucial garantizar privacidad, consentimiento y seguridad de datos. ğŸ”’" },`,
    `            { titulo: "âœ… Quiz: Responsabilidad Robot", tipo: 'mini_quiz', pregunta: "Si un robot autÃ³nomo causa un accidente, Â¿quiÃ©n es responsable?", opciones: ["Nadie", "Es un debate abierto: Â¿el fabricante, el programador, el usuario o el propio robot?", "Solo el robot", "Solo el usuario"], respuestaCorrecta: 1, explicacion: "Â¡Gran debate legal! Si un auto autÃ³nomo choca, Â¿quiÃ©n paga? Se necesitan nuevas leyes para la era robÃ³tica. La responsabilidad es compartida. ğŸ›ï¸" },`,
  ],
  'w3_mod15_diseno_bio': [
    `            { titulo: "âœ… Quiz: Proceso de DiseÃ±o Bio", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡l es el primer paso en el diseÃ±o biomimÃ©tico?", opciones: ["Construir el robot", "Observar un organismo natural y analizar cÃ³mo resuelve el problema", "Comprar materiales", "Programar"], respuestaCorrecta: 1, explicacion: "El diseÃ±o biomimÃ©tico empieza con la naturaleza: observar â†’ abstraer el principio â†’ implementar en ingenierÃ­a. Â¡La naturaleza primero! ğŸ”¬" },`,
    `            { titulo: "âœ… Quiz: Prototipado RÃ¡pido", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© tecnologÃ­a permite crear prototipos de biorobots rÃ¡pidamente?", opciones: ["Soldadura manual", "ImpresiÃ³n 3D con materiales flexibles como TPU y silicona", "Tallado en madera", "Solo simulaciÃ³n"], respuestaCorrecta: 1, explicacion: "La impresiÃ³n 3D con TPU (flexible) y silicona permite crear gripers blandos, patas articuladas y cuerpos biomÃ³rficos en horas. ğŸ–¨ï¸" },`,
    `            { titulo: "âœ… Quiz: SimulaciÃ³n", tipo: 'mini_quiz', pregunta: "Â¿Por quÃ© es importante simular antes de construir un biorobot?", opciones: ["Para perder tiempo", "Para probar diseÃ±os virtualmente y ahorrar materiales y tiempo", "No es importante", "Solo para presentaciones"], respuestaCorrecta: 1, explicacion: "La simulaciÃ³n permite probar miles de diseÃ±os en minutos sin gastar materiales. Software como Gazebo o V-REP simulan fÃ­sica real. ğŸ’»" },`,
    `            { titulo: "âœ… Quiz: IteraciÃ³n BiomimÃ©tica", tipo: 'mini_quiz', pregunta: "Â¿Por quÃ© los diseÃ±os biomimÃ©ticos requieren muchas iteraciones?", opciones: ["Porque los ingenieros son lentos", "Porque la naturaleza es compleja y cada iteraciÃ³n revela nuevos detalles a copiar", "No requieren iteraciones", "Solo hacen 2 versiones"], respuestaCorrecta: 1, explicacion: "Cada prototipo enseÃ±a algo nuevo. La naturaleza optimizÃ³ durante millones de aÃ±os, no podemos copiarla en un intento. Â¡Iterar es evolucionar! ğŸ”„" },`,
  ],
  'w3_mod16_proyecto_bio_final': [
    `            { titulo: "âœ… Quiz: PlanificaciÃ³n Bio-Proyecto", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© debe incluir la propuesta de un proyecto de biorobÃ³tica?", opciones: ["Solo el nombre", "Organismo inspirador, problema a resolver, sensores/actuadores y plan de pruebas", "Solo el presupuesto", "Solo fotos"], respuestaCorrecta: 1, explicacion: "Una propuesta completa: Â¿quÃ© animal/planta inspira? Â¿quÃ© problema resuelve? Â¿quÃ© componentes usa? Â¿cÃ³mo lo pruebas? Â¡Planificar es ganar! ğŸ“‹" },`,
    `            { titulo: "âœ… Quiz: MÃ©tricas de Ã‰xito", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo se mide el Ã©xito de un proyecto de biorobÃ³tica?", opciones: ["Solo si se ve bonito", "Comparando el rendimiento del robot con el organismo natural que imita", "Solo por el costo", "No se puede medir"], respuestaCorrecta: 1, explicacion: "El Ã©xito se mide comparando: eficiencia, velocidad, adaptabilidad. Si imitas un gecko, Â¿sube paredes? Â¿quÃ© tan bien vs el real? ğŸ“Š" },`,
    `            { titulo: "âœ… Quiz: PresentaciÃ³n CientÃ­fica", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© secciones debe tener la documentaciÃ³n de un proyecto de biorobÃ³tica?", opciones: ["Solo fotos del robot", "IntroducciÃ³n, investigaciÃ³n biolÃ³gica, diseÃ±o, construcciÃ³n, resultados y conclusiones", "Solo el cÃ³digo", "Solo el circuito"], respuestaCorrecta: 1, explicacion: "Como un paper cientÃ­fico: intro â†’ biologÃ­a del organismo â†’ diseÃ±o del robot â†’ resultados â†’ conclusiones â†’ mejoras futuras. Â¡SÃ© cientÃ­fico! ğŸ“„" },`,
    `            { titulo: "âœ… Quiz: Futuro de la BiorobÃ³tica", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡l es la frontera mÃ¡s emocionante de la biorobÃ³tica actual?", opciones: ["Robots mÃ¡s grandes", "Robots que combinan componentes vivos y artificiales (biohÃ­bridos)", "Robots mÃ¡s baratos", "Robots mÃ¡s ruidosos"], respuestaCorrecta: 1, explicacion: "Los robots biohÃ­bridos usan cÃ©lulas musculares vivas + estructuras artificiales. Â¡MÃ¡quinas que crecen, se reparan y evolucionan! ğŸ§¬ğŸ¤–" },`,
  ],
};

// For each module, find its ID in file, then scan forward for the line ending with },]
const modulePositions = [];
for (const moduleId of Object.keys(questions)) {
  let found = false;
  for (let i = 0; i < lines.length; i++) {
    if (lines[i].includes(`'${moduleId}'`)) {
      for (let j = i + 1; j < lines.length; j++) {
        if (lines[j].replace(/\r$/, '').endsWith('},]')) {
          modulePositions.push({ moduleId, closingLine: j });
          found = true;
          break;
        }
      }
      break;
    }
  }
  if (!found) console.log('NOT FOUND:', moduleId);
}

console.log('Found', modulePositions.length, 'module closing lines');

// Sort by closingLine DESCENDING so insertions don't shift earlier line numbers
modulePositions.sort((a, b) => b.closingLine - a.closingLine);

let total = 0;
for (const { moduleId, closingLine } of modulePositions) {
  const qLines = questions[moduleId];
  if (!qLines) continue;

  // Remove trailing ] from the closing line (keep the },)
  lines[closingLine] = lines[closingLine].replace(/\r$/, '').replace(/\]\s*$/, '');

  // Insert new quiz lines after the closing line, then close the array with ]
  const newLines = [...qLines, '        ]'];
  lines.splice(closingLine + 1, 0, ...newLines);

  total += qLines.length;
  console.log(`${moduleId}: +${qLines.length} questions at line ${closingLine + 1}`);
}

fs.writeFileSync('src/data/world3Data.js', lines.join('\n'));
console.log(`\nTotal: ${total} questions injected into World 3`);
