@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===== PWA SAFE AREA (status bar, notch) ===== */
/* 
 * On installed PWAs with viewport-fit=cover, content can go behind
 * the system status bar. We add padding so buttons remain tappable.
 */
:root {
  --sat: env(safe-area-inset-top, 0px);
  --sab: env(safe-area-inset-bottom, 0px);
  --sal: env(safe-area-inset-left, 0px);
  --sar: env(safe-area-inset-right, 0px);
}

/* Top safe area spacer — colored bar behind status bar */
body::before {
  content: '';
  display: block;
  width: 100%;
  height: var(--sat);
  background-color: #2563EB;
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  z-index: 10000;
  pointer-events: none;
}

/* Push all body content below the safe area */
body {
  padding-top: var(--sat) !important;
  padding-bottom: var(--sab) !important;
}

/* ===== DUOLINGO-INSPIRED DESIGN SYSTEM ===== */
:root {
  --duo-green: #2563EB;
  --duo-green-dark: #1D4ED8;
  --duo-green-light: #DBEAFE;
  --duo-blue: #1CB0F6;
  --duo-blue-dark: #1899D6;
  --duo-red: #FF4B4B;
  --duo-red-dark: #EA2B2B;
  --duo-yellow: #FFC800;
  --duo-yellow-dark: #E5B800;
  --duo-purple: #CE82FF;
  --duo-purple-dark: #A855F7;
  --duo-orange: #FF9600;
}

/* ===== ANIMATIONS ===== */
@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-8px); }
}
@keyframes slideUp {
  from { opacity: 0; transform: translateY(20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes slideDown {
  from { opacity: 0; transform: translateY(-20px); }
  to { opacity: 1; transform: translateY(0); }
}
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}
@keyframes scaleIn {
  from { opacity: 0; transform: scale(0.85); }
  to { opacity: 1; transform: scale(1); }
}
@keyframes pulse-soft {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}
@keyframes gradient-shift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}
@keyframes wiggle {
  0%, 100% { transform: rotate(0deg); }
  25% { transform: rotate(-5deg); }
  75% { transform: rotate(5deg); }
}
@keyframes bounce-in {
  0% { transform: scale(0); opacity: 0; }
  50% { transform: scale(1.15); }
  70% { transform: scale(0.95); }
  100% { transform: scale(1); opacity: 1; }
}
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  20% { transform: translateX(-4px); }
  40% { transform: translateX(4px); }
  60% { transform: translateX(-3px); }
  80% { transform: translateX(3px); }
}
@keyframes pop {
  0% { transform: scale(1); }
  50% { transform: scale(1.2); }
  100% { transform: scale(1); }
}
@keyframes glow-pulse {
  0%, 100% { box-shadow: 0 0 5px rgba(37,99,235,0.3); }
  50% { box-shadow: 0 0 20px rgba(37,99,235,0.6), 0 0 40px rgba(37,99,235,0.2); }
}

.animate-float { animation: float 3s ease-in-out infinite; }
.animate-slide-up { animation: slideUp 0.4s ease-out; }
.animate-slide-down { animation: slideDown 0.4s ease-out; }
.animate-fade-in { animation: fadeIn 0.3s ease-out; }
.animate-scale-in { animation: scaleIn 0.35s cubic-bezier(0.34, 1.56, 0.64, 1); }
.animate-pulse-soft { animation: pulse-soft 2s ease-in-out infinite; }
.animate-gradient { animation: gradient-shift 6s ease infinite; background-size: 200% 200%; }
.animate-wiggle { animation: wiggle 0.6s ease-in-out; }
.animate-bounce-in { animation: bounce-in 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); }
.animate-shake { animation: shake 0.4s ease-in-out; }
.animate-pop { animation: pop 0.3s ease-out; }
.animate-glow { animation: glow-pulse 2s ease-in-out infinite; }

/* Staggered children */
.stagger-children > * { animation: slideUp 0.4s ease-out forwards; opacity: 0; }
.stagger-children > *:nth-child(1) { animation-delay: 0ms; }
.stagger-children > *:nth-child(2) { animation-delay: 50ms; }
.stagger-children > *:nth-child(3) { animation-delay: 100ms; }
.stagger-children > *:nth-child(4) { animation-delay: 150ms; }
.stagger-children > *:nth-child(5) { animation-delay: 200ms; }
.stagger-children > *:nth-child(6) { animation-delay: 250ms; }
.stagger-children > *:nth-child(7) { animation-delay: 300ms; }
.stagger-children > *:nth-child(8) { animation-delay: 350ms; }
.stagger-children > *:nth-child(9) { animation-delay: 400ms; }
.stagger-children > *:nth-child(10) { animation-delay: 450ms; }

/* ===== GLOBAL STYLES ===== */
* { -webkit-tap-highlight-color: transparent; }

body {
  font-family: 'Nunito', sans-serif;
  background: #FFFFFF;
  overflow-x: hidden;
  -webkit-font-smoothing: antialiased;
}

::-webkit-scrollbar { width: 4px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: #E5E5E5; border-radius: 20px; }
::-webkit-scrollbar-thumb:hover { background: #AFAFAF; }

/* Glass morphism */
.glass {
  background: rgba(255, 255, 255, 0.92);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}

/* ===== PIXEL-ART DOCK NAV ===== */
.nav-dock {
  background: linear-gradient(180deg, #EFF6FF 0%, #DBEAFE 100%);
  border: 3px solid #1D4ED8;
  box-shadow:
    0 -3px 0 0 #1E40AF,
    0 3px 0 0 #93C5FD,
    inset 0 2px 0 rgba(255, 255, 255, 0.7),
    0 4px 20px rgba(30, 64, 175, 0.15);
  image-rendering: pixelated;
}

/* Pixel nav button */
.pixel-nav-btn {
  position: relative;
  transition: transform 0.08s ease, filter 0.08s ease;
  -webkit-tap-highlight-color: transparent;
  image-rendering: pixelated;
}
.pixel-nav-btn::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  opacity: 0;
  background: radial-gradient(circle, rgba(37, 99, 235, 0.15) 0%, transparent 70%);
  transition: opacity 0.2s;
}
.pixel-nav-btn:hover::after { opacity: 1; }
.pixel-nav-btn:active {
  transform: translateY(3px) scale(0.92);
  filter: brightness(0.92);
}
.pixel-nav-btn:active .pixel-btn-icon {
  box-shadow: 0 1px 0 0 var(--pb-dark) !important;
}

/* Pixel icon box */
.pixel-btn-icon {
  transition: box-shadow 0.08s ease, transform 0.08s ease;
}

/* Center explore button */
.pixel-nav-center {
  position: relative;
  transition: transform 0.1s ease;
  -webkit-tap-highlight-color: transparent;
}
.pixel-nav-center:active {
  transform: translateY(3px) scale(0.93);
}
.pixel-nav-center:active .pixel-center-box {
  box-shadow: 0 1px 0 0 #1E3A8A !important;
}

/* Pixel dot indicator */
@keyframes pixel-blink {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
.pixel-dot-active {
  animation: pixel-blink 1.8s ease-in-out infinite;
}

/* Duolingo 3D button system */
.btn-3d {
  position: relative;
  border-bottom: 4px solid;
  transition: all 0.1s ease;
  font-weight: 800;
}
.btn-3d:active {
  border-bottom-width: 2px;
  transform: translateY(2px);
}
.btn-3d-green { background: #2563EB; border-bottom-color: #1D4ED8; color: white; }
.btn-3d-green:hover { background: #3B82F6; }
.btn-3d-blue { background: #1CB0F6; border-bottom-color: #1899D6; color: white; }
.btn-3d-blue:hover { background: #2CBAF8; }
.btn-3d-red { background: #FF4B4B; border-bottom-color: #EA2B2B; color: white; }
.btn-3d-red:hover { background: #FF5E5E; }
.btn-3d-yellow { background: #FFC800; border-bottom-color: #E5B800; color: #3C3C3C; }
.btn-3d-purple { background: #CE82FF; border-bottom-color: #A855F7; color: white; }
.btn-3d-white { background: white; border-bottom-color: #E5E5E5; color: #4B4B4B; }
.btn-3d-white:hover { background: #F7F7F7; }
.btn-3d-gray { background: #E5E5E5; border-bottom-color: #AFAFAF; color: #777; }

/* Card shadows */
.card-shadow {
  box-shadow: 0 2px 4px rgba(0,0,0,0.04), 0 0 0 2px rgba(228,228,228,0.6);
}
.card-shadow-hover {
  box-shadow: 0 4px 12px rgba(0,0,0,0.08), 0 0 0 2px rgba(200,200,200,0.8);
}

/* Gradient text */
.gradient-text {
  background: linear-gradient(135deg, #2563EB, #1CB0F6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

/* Module node glow */
.node-active {
  box-shadow: 0 0 0 4px rgba(37,99,235,0.2), 0 4px 12px rgba(37,99,235,0.25);
}
.node-locked {
  filter: grayscale(0.4);
  opacity: 0.6;
}

/* Confetti animation */
@keyframes confetti-fall {
  0% { transform: translateY(-10px) rotate(0deg); opacity: 1; }
  100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
}
.animate-confetti-fall { animation: confetti-fall 2.5s ease-out forwards; }

/* Shimmer slide for achievement cards */
@keyframes shimmer-slide {
  0% { transform: translateX(-100%) skewX(-12deg); }
  100% { transform: translateX(200%) skewX(-12deg); }
}
.animate-shimmer-slide { animation: shimmer-slide 3s ease-in-out infinite; }

/* Progress step animation */
@keyframes step-complete {
  0% { transform: scale(1); }
  50% { transform: scale(1.3); }
  100% { transform: scale(1); }
}
.animate-step-complete { animation: step-complete 0.5s cubic-bezier(0.34, 1.56, 0.64, 1); }

/* Celebration sparkle */
@keyframes sparkle {
  0%, 100% { opacity: 0; transform: scale(0) rotate(0deg); }
  50% { opacity: 1; transform: scale(1) rotate(180deg); }
}
.animate-sparkle { animation: sparkle 1.5s ease-in-out infinite; }

/* XP counter animation */
@keyframes xp-pop {
  0% { transform: translateY(0) scale(1); opacity: 1; }
  100% { transform: translateY(-30px) scale(1.3); opacity: 0; }
}
.animate-xp-pop { animation: xp-pop 1s ease-out forwards; }

/* Scrollbar hide for horizontal scrolls */
.scrollbar-hide::-webkit-scrollbar { display: none; }
.scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

/* Robot reading/talking animation */
@keyframes robot-read {
  0%, 100% { transform: translateY(0) rotate(0deg); }
  15% { transform: translateY(-3px) rotate(-2deg); }
  30% { transform: translateY(0) rotate(0deg); }
  45% { transform: translateY(-2px) rotate(2deg); }
  60% { transform: translateY(0) rotate(0deg); }
  75% { transform: translateY(-3px) rotate(-1deg); }
  90% { transform: translateY(-1px) rotate(1deg); }
}
.animate-robot-read { animation: robot-read 1s ease-in-out infinite; }

/* Sound wave animation for TTS */
@keyframes sound-wave {
  0%, 100% { transform: scaleY(0.4); }
  50% { transform: scaleY(1); }
}
.animate-sound-wave > span {
  display: inline-block;
  width: 3px;
  height: 14px;
  margin: 0 1px;
  background: currentColor;
  border-radius: 2px;
  animation: sound-wave 0.6s ease-in-out infinite;
}
.animate-sound-wave > span:nth-child(2) { animation-delay: 0.1s; }
.animate-sound-wave > span:nth-child(3) { animation-delay: 0.2s; }
.animate-sound-wave > span:nth-child(4) { animation-delay: 0.3s; }

/* Image card animation */
@keyframes img-reveal {
  0% { opacity: 0; transform: scale(0.9) translateY(10px); }
  100% { opacity: 1; transform: scale(1) translateY(0); }
}
.animate-img-reveal { animation: img-reveal 0.5s ease-out; }

/* ===== PIXEL ART WORLD BACKGROUNDS ===== */

/* World 1: El Taller del Inventor - Workshop pixel pattern */
.bg-world-taller {
  background-color: #E8F0FE;
  background-image:
    /* Workbench grid lines */
    linear-gradient(90deg, rgba(99,102,241,0.06) 1px, transparent 1px),
    linear-gradient(0deg, rgba(99,102,241,0.06) 1px, transparent 1px),
    /* Pixel gears scattered */
    radial-gradient(circle 3px at 15% 20%, rgba(99,102,241,0.12) 3px, transparent 3px),
    radial-gradient(circle 2px at 16% 19%, rgba(79,70,229,0.08) 2px, transparent 2px),
    radial-gradient(circle 3px at 85% 15%, rgba(99,102,241,0.10) 3px, transparent 3px),
    radial-gradient(circle 3px at 50% 45%, rgba(99,102,241,0.08) 3px, transparent 3px),
    radial-gradient(circle 2px at 25% 70%, rgba(79,70,229,0.10) 2px, transparent 2px),
    radial-gradient(circle 3px at 75% 80%, rgba(99,102,241,0.10) 3px, transparent 3px),
    radial-gradient(circle 2px at 10% 90%, rgba(99,102,241,0.07) 2px, transparent 2px),
    radial-gradient(circle 2px at 90% 55%, rgba(79,70,229,0.09) 2px, transparent 2px),
    /* Pixel bolts */
    linear-gradient(45deg, rgba(99,102,241,0.04) 25%, transparent 25%),
    linear-gradient(-45deg, rgba(99,102,241,0.04) 25%, transparent 25%);
  background-size:
    24px 24px,
    24px 24px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    48px 48px,
    48px 48px;
}

.bg-world-taller::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 0;
  background-image:
    /* Pixel wrench top-right */
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Crect x='8' y='4' width='4' height='4' fill='%236366F1' opacity='0.06'/%3E%3Crect x='12' y='8' width='4' height='4' fill='%236366F1' opacity='0.06'/%3E%3Crect x='16' y='12' width='4' height='4' fill='%236366F1' opacity='0.06'/%3E%3Crect x='20' y='16' width='4' height='4' fill='%236366F1' opacity='0.06'/%3E%3Crect x='24' y='20' width='4' height='4' fill='%236366F1' opacity='0.06'/%3E%3Crect x='28' y='24' width='4' height='4' fill='%236366F1' opacity='0.06'/%3E%3C/svg%3E"),
    /* Pixel circuit board traces */
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cpath d='M10 30 H25 V15 H40' stroke='%236366F1' stroke-width='1' fill='none' opacity='0.05'/%3E%3Ccircle cx='10' cy='30' r='2' fill='%236366F1' opacity='0.07'/%3E%3Ccircle cx='40' cy='15' r='2' fill='%236366F1' opacity='0.07'/%3E%3C/svg%3E");
  background-size: 120px 120px, 180px 180px;
  background-position: 20px 80px, 0 0;
}

/* World 2: La Fábrica de Autómatas - Factory pixel pattern */
.bg-world-fabrica {
  background-color: #FEF9E7;
  background-image:
    /* Factory grid */
    linear-gradient(90deg, rgba(217,119,6,0.05) 1px, transparent 1px),
    linear-gradient(0deg, rgba(217,119,6,0.05) 1px, transparent 1px),
    /* Pixel conveyor dots */
    radial-gradient(circle 3px at 20% 25%, rgba(217,119,6,0.10) 3px, transparent 3px),
    radial-gradient(circle 3px at 80% 20%, rgba(180,83,9,0.08) 3px, transparent 3px),
    radial-gradient(circle 2px at 45% 60%, rgba(217,119,6,0.10) 2px, transparent 2px),
    radial-gradient(circle 3px at 70% 75%, rgba(180,83,9,0.09) 3px, transparent 3px),
    radial-gradient(circle 2px at 15% 85%, rgba(217,119,6,0.08) 2px, transparent 2px),
    radial-gradient(circle 2px at 90% 45%, rgba(217,119,6,0.07) 2px, transparent 2px),
    /* Pixel rivets */
    radial-gradient(circle 1.5px at 12px 12px, rgba(180,83,9,0.08) 1.5px, transparent 1.5px);
  background-size:
    20px 20px,
    20px 20px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    24px 24px;
}

.bg-world-fabrica::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 0;
  background-image:
    /* Pixel robot arm */
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Crect x='8' y='20' width='4' height='4' fill='%23D97706' opacity='0.06'/%3E%3Crect x='12' y='20' width='4' height='4' fill='%23D97706' opacity='0.06'/%3E%3Crect x='16' y='16' width='4' height='4' fill='%23D97706' opacity='0.06'/%3E%3Crect x='16' y='24' width='4' height='4' fill='%23D97706' opacity='0.06'/%3E%3Crect x='20' y='20' width='4' height='4' fill='%23D97706' opacity='0.06'/%3E%3C/svg%3E"),
    /* Pixel sensor waves */
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cpath d='M30 10 Q45 30 30 50' stroke='%23D97706' stroke-width='1' fill='none' opacity='0.04'/%3E%3Cpath d='M25 15 Q38 30 25 45' stroke='%23D97706' stroke-width='1' fill='none' opacity='0.04'/%3E%3C/svg%3E");
  background-size: 140px 140px, 200px 200px;
  background-position: 30px 100px, 60% 20%;
}

/* World 3: La Selva Cibernética - Bio jungle pixel pattern */
.bg-world-selva {
  background-color: #E6F7F0;
  background-image:
    /* Vine grid lines */
    linear-gradient(90deg, rgba(5,150,105,0.05) 1px, transparent 1px),
    linear-gradient(0deg, rgba(5,150,105,0.05) 1px, transparent 1px),
    /* Bio dots scattered */
    radial-gradient(circle 3px at 18% 22%, rgba(16,185,129,0.12) 3px, transparent 3px),
    radial-gradient(circle 2px at 82% 18%, rgba(5,150,105,0.08) 2px, transparent 2px),
    radial-gradient(circle 3px at 45% 55%, rgba(16,185,129,0.10) 3px, transparent 3px),
    radial-gradient(circle 3px at 72% 78%, rgba(5,150,105,0.09) 3px, transparent 3px),
    radial-gradient(circle 2px at 12% 82%, rgba(16,185,129,0.08) 2px, transparent 2px),
    radial-gradient(circle 2px at 88% 48%, rgba(5,150,105,0.07) 2px, transparent 2px),
    /* Pixel leaves */
    linear-gradient(45deg, rgba(16,185,129,0.04) 25%, transparent 25%),
    linear-gradient(-45deg, rgba(5,150,105,0.04) 25%, transparent 25%);
  background-size:
    20px 20px,
    20px 20px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    40px 40px,
    40px 40px;
}

.bg-world-selva::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 0;
  background-image:
    /* Pixel DNA helix */
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='60' viewBox='0 0 40 60'%3E%3Crect x='12' y='4' width='3' height='3' fill='%23059669' opacity='0.06'/%3E%3Crect x='25' y='4' width='3' height='3' fill='%23059669' opacity='0.06'/%3E%3Crect x='15' y='14' width='3' height='3' fill='%23059669' opacity='0.05'/%3E%3Crect x='22' y='14' width='3' height='3' fill='%23059669' opacity='0.05'/%3E%3Crect x='18' y='24' width='4' height='3' fill='%23059669' opacity='0.06'/%3E%3Crect x='22' y='34' width='3' height='3' fill='%23059669' opacity='0.05'/%3E%3Crect x='15' y='34' width='3' height='3' fill='%23059669' opacity='0.05'/%3E%3Crect x='25' y='44' width='3' height='3' fill='%23059669' opacity='0.06'/%3E%3Crect x='12' y='44' width='3' height='3' fill='%23059669' opacity='0.06'/%3E%3C/svg%3E"),
    /* Pixel leaf veins */
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='60' height='60' viewBox='0 0 60 60'%3E%3Cpath d='M10 50 Q30 20 50 10' stroke='%2310B981' stroke-width='0.8' fill='none' opacity='0.04'/%3E%3Cpath d='M20 50 Q30 30 45 25' stroke='%2310B981' stroke-width='0.5' fill='none' opacity='0.03'/%3E%3C/svg%3E");
  background-size: 120px 180px, 200px 200px;
  background-position: 40px 60px, 0 0;
}

/* World 4: La Estación Orbital - Space station pixel pattern */
.bg-world-orbital {
  background-color: #E8F0FE;
  background-image:
    /* Station hull grid */
    linear-gradient(90deg, rgba(99,102,241,0.06) 1px, transparent 1px),
    linear-gradient(0deg, rgba(99,102,241,0.06) 1px, transparent 1px),
    /* Star dots */
    radial-gradient(circle 2px at 10% 15%, rgba(99,102,241,0.14) 2px, transparent 2px),
    radial-gradient(circle 1.5px at 85% 12%, rgba(129,140,248,0.10) 1.5px, transparent 1.5px),
    radial-gradient(circle 2px at 50% 40%, rgba(99,102,241,0.12) 2px, transparent 2px),
    radial-gradient(circle 2px at 75% 70%, rgba(67,56,202,0.09) 2px, transparent 2px),
    radial-gradient(circle 1.5px at 20% 80%, rgba(129,140,248,0.10) 1.5px, transparent 1.5px),
    radial-gradient(circle 2px at 92% 55%, rgba(99,102,241,0.08) 2px, transparent 2px),
    /* Hull panel lines */
    linear-gradient(0deg, rgba(99,102,241,0.03) 50%, transparent 50%),
    linear-gradient(90deg, rgba(67,56,202,0.03) 50%, transparent 50%);
  background-size:
    24px 24px,
    24px 24px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    200px 200px,
    48px 48px,
    48px 48px;
}

.bg-world-orbital::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 0;
  background-image:
    /* Pixel satellite */
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='48' height='48' viewBox='0 0 48 48'%3E%3Crect x='20' y='10' width='8' height='4' fill='%236366F1' opacity='0.06'/%3E%3Crect x='22' y='14' width='4' height='12' fill='%236366F1' opacity='0.06'/%3E%3Crect x='10' y='18' width='12' height='3' fill='%234338CA' opacity='0.05'/%3E%3Crect x='26' y='18' width='12' height='3' fill='%234338CA' opacity='0.05'/%3E%3Crect x='22' y='26' width='4' height='4' fill='%236366F1' opacity='0.06'/%3E%3C/svg%3E"),
    /* Pixel orbit path */
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='80' height='80' viewBox='0 0 80 80'%3E%3Cellipse cx='40' cy='40' rx='35' ry='15' stroke='%236366F1' stroke-width='0.6' fill='none' opacity='0.04' transform='rotate(-20 40 40)'/%3E%3Ccircle cx='60' cy='32' r='2' fill='%236366F1' opacity='0.06'/%3E%3C/svg%3E");
  background-size: 160px 160px, 240px 240px;
  background-position: 20px 80px, 50% 30%;
}

/* ===== GALAXY WORLD MAP ===== */
@keyframes galaxy-rotate {
  0% { transform: rotate(0deg) scale(1); }
  50% { transform: rotate(180deg) scale(1.1); }
  100% { transform: rotate(360deg) scale(1); }
}

@keyframes nebula-drift {
  0% { transform: translate(0, 0) scale(1); opacity: 0.4; }
  25% { transform: translate(30px, -20px) scale(1.15); opacity: 0.6; }
  50% { transform: translate(-20px, 30px) scale(1.05); opacity: 0.35; }
  75% { transform: translate(-30px, -10px) scale(1.2); opacity: 0.55; }
  100% { transform: translate(0, 0) scale(1); opacity: 0.4; }
}

@keyframes nebula-drift-2 {
  0% { transform: translate(0, 0) scale(1.1); opacity: 0.3; }
  33% { transform: translate(-40px, 20px) scale(1); opacity: 0.5; }
  66% { transform: translate(20px, -30px) scale(1.2); opacity: 0.35; }
  100% { transform: translate(0, 0) scale(1.1); opacity: 0.3; }
}

@keyframes star-twinkle {
  0%, 100% { opacity: 0.2; transform: scale(1); }
  50% { opacity: 1; transform: scale(1.5); }
}

@keyframes shooting-star {
  0% { transform: translateX(0) translateY(0); opacity: 0; }
  5% { opacity: 1; }
  30% { opacity: 1; }
  100% { transform: translateX(300px) translateY(200px); opacity: 0; }
}

@keyframes float-planet {
  0%, 100% { transform: translateY(0px) rotate(0deg); }
  25% { transform: translateY(-8px) rotate(2deg); }
  50% { transform: translateY(-15px) rotate(0deg); }
  75% { transform: translateY(-5px) rotate(-2deg); }
}

@keyframes ship-fly {
  0%, 100% { transform: translateY(0px) translateX(0px) rotate(-2deg); }
  15% { transform: translateY(-12px) translateX(4px) rotate(1deg); }
  30% { transform: translateY(-6px) translateX(-3px) rotate(-1deg); }
  50% { transform: translateY(-16px) translateX(2px) rotate(2deg); }
  65% { transform: translateY(-8px) translateX(-5px) rotate(0deg); }
  80% { transform: translateY(-14px) translateX(3px) rotate(-2deg); }
}

@keyframes orbit-ring {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

@keyframes galaxy-particles {
  0% { transform: translateY(0) translateX(0); opacity: 0; }
  10% { opacity: 0.8; }
  90% { opacity: 0.8; }
  100% { transform: translateY(-100vh) translateX(50px); opacity: 0; }
}

.galaxy-bg {
  background: linear-gradient(135deg, #0F1A3E 0%, #1E3A8A 20%, #1E3A5F 40%, #172554 60%, #1E40AF 80%, #1E3A8A 100%);
  background-size: 400% 400%;
  animation: galaxy-bg-shift 20s ease-in-out infinite;
}

@keyframes galaxy-bg-shift {
  0% { background-position: 0% 50%; }
  25% { background-position: 50% 0%; }
  50% { background-position: 100% 50%; }
  75% { background-position: 50% 100%; }
  100% { background-position: 0% 50%; }
}

.galaxy-star {
  position: absolute;
  border-radius: 50%;
  background: white;
  animation: star-twinkle var(--twinkle-duration, 3s) ease-in-out infinite;
  animation-delay: var(--twinkle-delay, 0s);
}

.galaxy-nebula {
  position: absolute;
  border-radius: 50%;
  filter: blur(40px);
  animation: nebula-drift var(--nebula-duration, 15s) ease-in-out infinite;
}

.galaxy-nebula-2 {
  position: absolute;
  border-radius: 50%;
  filter: blur(50px);
  animation: nebula-drift-2 var(--nebula-duration, 18s) ease-in-out infinite;
}

.galaxy-shooting-star {
  position: absolute;
  width: 3px;
  height: 3px;
  background: white;
  border-radius: 50%;
  animation: shooting-star var(--shoot-duration, 4s) linear infinite;
  animation-delay: var(--shoot-delay, 0s);
}

.galaxy-shooting-star::after {
  content: '';
  position: absolute;
  width: 40px;
  height: 1.5px;
  background: linear-gradient(to left, rgba(255,255,255,0.8), transparent);
  top: 50%;
  right: 100%;
  transform: translateY(-50%);
}

.galaxy-particle {
  position: absolute;
  width: 2px;
  height: 2px;
  background: rgba(255,255,255,0.6);
  border-radius: 50%;
  animation: galaxy-particles var(--particle-duration, 8s) linear infinite;
  animation-delay: var(--particle-delay, 0s);
}

/* ===== SPACE STATION / MECHANICAL BUTTON SYSTEM ===== */

/* Station panel - dark metallic card */
.station-panel {
  background: linear-gradient(145deg, rgba(15,26,62,0.95), rgba(30,58,138,0.9));
  border: 1px solid rgba(59,130,246,0.3);
  border-radius: 16px;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.06),
    0 4px 20px rgba(0,0,0,0.4),
    0 0 0 1px rgba(0,0,0,0.3);
  backdrop-filter: blur(12px);
  position: relative;
  overflow: hidden;
}

.station-panel::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0;
  height: 3px;
  background: linear-gradient(90deg, transparent, rgba(59,130,246,0.6), transparent);
}

/* Mechanical button - space station control */
.mech-btn {
  position: relative;
  background: linear-gradient(180deg, rgba(30,64,175,0.9) 0%, rgba(15,26,62,0.95) 100%);
  border: 1px solid rgba(59,130,246,0.35);
  border-radius: 14px;
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    inset 0 -2px 0 rgba(0,0,0,0.3),
    0 4px 12px rgba(0,0,0,0.4),
    0 0 20px rgba(59,130,246,0.08);
  cursor: pointer;
  transition: all 0.2s ease;
  overflow: hidden;
}

.mech-btn::before {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: linear-gradient(180deg, rgba(255,255,255,0.04) 0%, transparent 50%);
  border-radius: 14px;
  pointer-events: none;
}

.mech-btn:hover {
  border-color: rgba(59,130,246,0.6);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.1),
    inset 0 -2px 0 rgba(0,0,0,0.3),
    0 4px 20px rgba(59,130,246,0.2),
    0 0 30px rgba(59,130,246,0.1);
  transform: translateY(-1px);
}

.mech-btn:active {
  transform: translateY(1px);
  box-shadow:
    inset 0 2px 4px rgba(0,0,0,0.4),
    0 1px 4px rgba(0,0,0,0.3);
}

/* Glow variants */
.mech-btn-cyan {
  border-color: rgba(6,182,212,0.4);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    inset 0 -2px 0 rgba(0,0,0,0.3),
    0 4px 12px rgba(0,0,0,0.4),
    0 0 20px rgba(6,182,212,0.1);
}

.mech-btn-cyan:hover {
  border-color: rgba(6,182,212,0.7);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.1),
    inset 0 -2px 0 rgba(0,0,0,0.3),
    0 4px 20px rgba(6,182,212,0.25),
    0 0 30px rgba(6,182,212,0.15);
}

.mech-btn-amber {
  border-color: rgba(245,158,11,0.4);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    inset 0 -2px 0 rgba(0,0,0,0.3),
    0 4px 12px rgba(0,0,0,0.4),
    0 0 20px rgba(245,158,11,0.1);
}

.mech-btn-amber:hover {
  border-color: rgba(245,158,11,0.7);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.1),
    inset 0 -2px 0 rgba(0,0,0,0.3),
    0 4px 20px rgba(245,158,11,0.25),
    0 0 30px rgba(245,158,11,0.15);
}

.mech-btn-red {
  border-color: rgba(239,68,68,0.4);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    inset 0 -2px 0 rgba(0,0,0,0.3),
    0 4px 12px rgba(0,0,0,0.4),
    0 0 20px rgba(239,68,68,0.1);
}

.mech-btn-red:hover {
  border-color: rgba(239,68,68,0.7);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.1),
    inset 0 -2px 0 rgba(0,0,0,0.3),
    0 4px 20px rgba(239,68,68,0.25),
    0 0 30px rgba(239,68,68,0.15);
}

.mech-btn-green {
  border-color: rgba(34,197,94,0.4);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.08),
    inset 0 -2px 0 rgba(0,0,0,0.3),
    0 4px 12px rgba(0,0,0,0.4),
    0 0 20px rgba(34,197,94,0.1);
}

.mech-btn-green:hover {
  border-color: rgba(34,197,94,0.7);
  box-shadow:
    inset 0 1px 0 rgba(255,255,255,0.1),
    inset 0 -2px 0 rgba(0,0,0,0.3),
    0 4px 20px rgba(34,197,94,0.25),
    0 0 30px rgba(34,197,94,0.15);
}

/* Station section header */
.station-header {
  display: flex;
  align-items: center;
  gap: 10px;
  padding: 10px 16px;
  background: linear-gradient(90deg, rgba(59,130,246,0.15), transparent);
  border-left: 3px solid rgba(59,130,246,0.7);
  border-radius: 0 8px 8px 0;
  margin-bottom: 12px;
}

.station-header-cyan {
  background: linear-gradient(90deg, rgba(6,182,212,0.15), transparent);
  border-left-color: rgba(6,182,212,0.7);
}

.station-header-amber {
  background: linear-gradient(90deg, rgba(245,158,11,0.15), transparent);
  border-left-color: rgba(245,158,11,0.7);
}

/* Indicator LED dot */
.led-dot {
  width: 6px;
  height: 6px;
  border-radius: 50%;
  background: currentColor;
  box-shadow: 0 0 6px currentColor, 0 0 12px currentColor;
  animation: led-pulse 2s ease-in-out infinite;
}

@keyframes led-pulse {
  0%, 100% { opacity: 0.7; }
  50% { opacity: 1; }
}

/* Scan line overlay effect */
.station-scanline::after {
  content: '';
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  background: repeating-linear-gradient(
    0deg,
    transparent,
    transparent 2px,
    rgba(59,130,246,0.02) 2px,
    rgba(59,130,246,0.02) 4px
  );
  pointer-events: none;
  border-radius: inherit;
}

/* Tag badge - small status indicator */
.station-tag {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  padding: 3px 10px;
  border-radius: 20px;
  font-size: 10px;
  font-weight: 800;
  border: 1px solid rgba(255,255,255,0.1);
  background: rgba(255,255,255,0.06);
}

/* Glow text */
.glow-text-purple { text-shadow: 0 0 10px rgba(59,130,246,0.5); }
.glow-text-cyan { text-shadow: 0 0 10px rgba(6,182,212,0.5); }
.glow-text-amber { text-shadow: 0 0 10px rgba(245,158,11,0.5); }
