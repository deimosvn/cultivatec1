// Script to inject ONLY the missing World 3 questions (modules that failed in first run)
const fs = require('fs');

function serializeQuestion(q) {
  if (q.tipo === 'mini_quiz') {
    const opts = q.opciones.map(o => `"${o.replace(/"/g, '\\"')}"`).join(', ');
    return `{ titulo: "${q.titulo}", tipo: 'mini_quiz', pregunta: "${q.pregunta.replace(/"/g, '\\"')}", opciones: [${opts}], respuestaCorrecta: ${q.respuestaCorrecta}, explicacion: "${q.explicacion.replace(/"/g, '\\"')}" }`;
  }
  if (q.tipo === 'true_false') {
    const stmts = q.statements.map(s => `{ text: '${s.text.replace(/'/g, "\\'")}', correct: ${s.correct}, explain: '${s.explain.replace(/'/g, "\\'")}' }`).join(', ');
    return `{ titulo: "${q.titulo}", tipo: 'true_false', statements: [${stmts}] }`;
  }
  if (q.tipo === 'matching_game') {
    const pairs = q.pairs.map(p => `{ left: '${p.left.replace(/'/g, "\\'")}', right: '${p.right.replace(/'/g, "\\'")}' }`).join(', ');
    return `{ titulo: "${q.titulo}", tipo: 'matching_game', instruccion: '${(q.instruccion||'Conecta los conceptos').replace(/'/g, "\\'")}', pairs: [${pairs}] }`;
  }
  return JSON.stringify(q);
}

function injectQuestions(filePath, extraQuestions) {
  let src = fs.readFileSync(filePath, 'utf-8');
  let offset = 0;
  let count = 0;
  for (const [moduleId, questions] of Object.entries(extraQuestions)) {
    if (!questions || questions.length === 0) continue;
    const idPattern = `id: '${moduleId}'`;
    const idIdx = src.indexOf(idPattern, offset);
    if (idIdx === -1) { console.log(`WARNING: ${moduleId} not found`); continue; }
    const ctSearch = src.indexOf('contenidoTeorico:', idIdx);
    if (ctSearch === -1 || ctSearch - idIdx > 3000) continue;
    const bracketStart = src.indexOf('[', ctSearch);
    if (bracketStart === -1) continue;
    let depth = 0, closingIdx = -1;
    for (let i = bracketStart; i < src.length; i++) {
      if (src[i] === '[') depth++;
      else if (src[i] === ']') { depth--; if (depth === 0) { closingIdx = i; break; } }
    }
    if (closingIdx === -1) continue;
    const insertions = questions.map(q => '\n            ' + serializeQuestion(q) + ',').join('');
    src = src.slice(0, closingIdx) + insertions + src.slice(closingIdx);
    offset = closingIdx + insertions.length;
    count += questions.length;
    console.log(`  âœ… ${moduleId}: +${questions.length}`);
  }
  fs.writeFileSync(filePath, src, 'utf-8');
  console.log(`  ğŸ’¾ Saved (${count} questions added)\n`);
}

const W3_FIX = {
  'w3_mod3_musculos_artificiales': [
    { titulo: "âœ… Quiz: MÃºsculos Artificiales", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© son los mÃºsculos artificiales en robÃ³tica?", opciones: ["MÃºsculos humanos trasplantados", "Actuadores que imitan la contracciÃ³n y expansiÃ³n de mÃºsculos biolÃ³gicos", "Motores comunes", "Solo existen en ciencia ficciÃ³n"], respuestaCorrecta: 1, explicacion: "Son actuadores que se contraen como mÃºsculos reales. MÃ¡s suaves y flexibles que los motores. ğŸ’ª" },
    { titulo: "âœ… Quiz: SMA", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo funcionan los cables SMA (Shape Memory Alloy)?", opciones: ["Con imanes", "Se contraen al calentarse y vuelven a su forma original al enfriarse", "Con aire comprimido", "Con luz"], respuestaCorrecta: 1, explicacion: "Las aleaciones con memoria de forma (como Nitinol) recuerdan su forma. Al calentarlas con corriente, se contraen como un mÃºsculo. ğŸ”¥" },
    { titulo: "âœ… Quiz: NeumÃ¡tico", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© tipo de mÃºsculo artificial usa aire comprimido para moverse?", opciones: ["SMA", "MÃºsculo neumÃ¡tico (McKibben)", "Motor servo", "ElectroimÃ¡n"], respuestaCorrecta: 1, explicacion: "Los mÃºsculos neumÃ¡ticos McKibben se inflan con aire y se acortan, imitando la contracciÃ³n muscular. Â¡Fuertes y ligeros! ğŸ’¨" },
    { titulo: "âœ… Quiz: DEA", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© son los actuadores de elastÃ³mero dielÃ©ctrico (DEA)?", opciones: ["Resortes", "Membranas que se deforman al aplicar voltaje elÃ©ctrico", "Cables magnÃ©ticos", "Motores pequeÃ±os"], respuestaCorrecta: 1, explicacion: "Los DEA son polÃ­meros que cambian de forma con electricidad. Â¡MÃºsculos artificiales ultra-delgados y flexibles! âš¡" },
    { titulo: "âœ… Quiz: Ventaja", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© ventaja tienen los mÃºsculos artificiales sobre los motores tradicionales?", opciones: ["Son mÃ¡s baratos", "Son mÃ¡s flexibles, silenciosos y livianos, ideales para interacciÃ³n con humanos", "Son mÃ¡s rÃ¡pidos", "Usan menos energÃ­a"], respuestaCorrecta: 1, explicacion: "Los mÃºsculos artificiales hacen que los robots sean mÃ¡s suaves y seguros para interactuar con personas. ğŸ¤" },
    { titulo: "âœ…âŒ MÃºsculos: Â¿V o F?", tipo: 'true_false', statements: [{ text: 'Los mÃºsculos neumÃ¡ticos pueden generar fuerzas comparables a un mÃºsculo humano de tamaÃ±o similar.', correct: true, explain: 'Los McKibben pueden generar fuerzas impresionantes para su tamaÃ±o y peso.' }, { text: 'Los mÃºsculos artificiales actuales ya son mejores que los biolÃ³gicos en todo.', correct: false, explain: 'Los biolÃ³gicos aÃºn superan en eficiencia energÃ©tica, autorecuperaciÃ³n y control preciso.' }] },
    { titulo: "ğŸ§© Tipos de MÃºsculos Artificiales", tipo: 'matching_game', instruccion: 'Conecta cada tecnologÃ­a con su principio', pairs: [{ left: 'SMA (Nitinol)', right: 'Memoria de forma con calor' }, { left: 'NeumÃ¡tico (McKibben)', right: 'Aire comprimido' }, { left: 'DEA', right: 'Voltaje en elastÃ³mero' }, { left: 'HidrÃ¡ulico', right: 'Fluido presurizado' }] },
  ],
  'w3_mod4_sentidos_bio': [
    { titulo: "âœ… Quiz: Biosensor", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© hace un biosensor en un robot?", opciones: ["Detecta robots", "Mide seÃ±ales biolÃ³gicas como pulso, temperatura corporal o sudoraciÃ³n", "Solo mide la baterÃ­a", "Detecta metales"], respuestaCorrecta: 1, explicacion: "Los biosensores detectan seÃ±ales del cuerpo humano. Â¡Un robot puede saber si estÃ¡s cansado o estresado! ğŸ’“" },
    { titulo: "âœ… Quiz: Sensor de Pulso", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo funciona un sensor de pulso cardÃ­aco Ã³ptico?", opciones: ["Escucha el corazÃ³n", "Emite luz y mide cuÃ¡nta se refleja; la sangre cambia la reflexiÃ³n con cada latido", "Mide la presiÃ³n", "Detecta electricidad"], respuestaCorrecta: 1, explicacion: "Un LED emite luz al dedo. La hemoglobina absorbe mÃ¡s luz con cada latido. Â¡FotopletismografÃ­a! ğŸ’“ğŸ’¡" },
    { titulo: "âœ… Quiz: EMG", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© tipo de seÃ±al detecta un sensor EMG?", opciones: ["Ondas de sonido", "SeÃ±ales elÃ©ctricas de los mÃºsculos", "Luz infrarroja", "SeÃ±ales WiFi"], respuestaCorrecta: 1, explicacion: "EMG = ElectromiografÃ­a. Detecta las seÃ±ales elÃ©ctricas de los mÃºsculos al contraerse. Â¡Control muscular de robots! ğŸ’ªâš¡" },
    { titulo: "âœ… Quiz: GSR", tipo: 'mini_quiz', pregunta: "Un sensor GSR (Respuesta GalvÃ¡nica de la Piel) detecta:", opciones: ["Color de piel", "Nivel de sudoraciÃ³n (indica estrÃ©s o emociones)", "Temperatura del aire", "Movimiento"], respuestaCorrecta: 1, explicacion: "La piel cambia su conductividad con el sudor. MÃ¡s estrÃ©s = mÃ¡s sudor = menos resistencia elÃ©ctrica. ğŸ˜°" },
    { titulo: "âœ… Quiz: AplicaciÃ³n", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo podrÃ­a un robot usar datos de biosensores?", opciones: ["Para nada", "Adaptar su comportamiento al estado emocional o fÃ­sico del usuario", "Solo para mostrar datos", "Para ir mÃ¡s rÃ¡pido"], respuestaCorrecta: 1, explicacion: "Un robot podrÃ­a ir mÃ¡s lento si detecta que el usuario estÃ¡ cansado, o alertar si el pulso es anormal. Â¡RobÃ³tica empÃ¡tica! ğŸ¤–â¤ï¸" },
    { titulo: "âœ…âŒ Biosensores: Â¿V o F?", tipo: 'true_false', statements: [{ text: 'Un smartwatch usa biosensores para medir el pulso cardÃ­aco.', correct: true, explain: 'Los smartwatches usan sensores Ã³pticos de pulso (PPG) en la muÃ±eca.' }, { text: 'Los biosensores pueden leer los pensamientos de las personas.', correct: false, explain: 'Los biosensores miden seÃ±ales fÃ­sicas (pulso, sudor, temperatura). No leen pensamientos.' }] },
    { titulo: "ğŸ§© Biosensores y SeÃ±ales", tipo: 'matching_game', instruccion: 'Conecta cada biosensor con lo que mide', pairs: [{ left: 'Sensor PPG', right: 'Pulso cardÃ­aco' }, { left: 'Sensor EMG', right: 'Actividad muscular' }, { left: 'Sensor GSR', right: 'Nivel de estrÃ©s/sudor' }, { left: 'Termistor corporal', right: 'Temperatura del cuerpo' }] },
  ],
  'w3_mod5_protesis_intro': [
    { titulo: "âœ… Quiz: PrÃ³tesis BiÃ³nica", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© diferencia una prÃ³tesis biÃ³nica de una prÃ³tesis pasiva?", opciones: ["El color", "La biÃ³nica tiene sensores y actuadores que permiten movimiento activo", "El material", "El tamaÃ±o"], respuestaCorrecta: 1, explicacion: "Las prÃ³tesis biÃ³nicas detectan seÃ±ales musculares (EMG) y mueven dedos/articulaciones con motores. ğŸ¦¾" },
    { titulo: "âœ… Quiz: Control EMG", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo controla una persona su prÃ³tesis biÃ³nica de mano?", opciones: ["Con la mente directamente", "Contrayendo mÃºsculos del muÃ±Ã³n que envÃ­an seÃ±ales EMG a la prÃ³tesis", "Con un control remoto", "Con la voz"], respuestaCorrecta: 1, explicacion: "Electrodos en el muÃ±Ã³n detectan cuÃ¡ndo el usuario contrae mÃºsculos. Cada contracciÃ³n activa un movimiento. ğŸ’ªğŸ¤–" },
    { titulo: "âœ… Quiz: RetroalimentaciÃ³n", tipo: 'mini_quiz', pregunta: "Â¿Por quÃ© es importante que una prÃ³tesis dÃ© retroalimentaciÃ³n sensorial al usuario?", opciones: ["Solo por estÃ©tica", "Para que el usuario sienta presiÃ³n/temperatura y no aplaste objetos", "No es importante", "Para hacer ruido"], respuestaCorrecta: 1, explicacion: "Sin retroalimentaciÃ³n, el usuario puede aplastar un vaso. Â¡Los sensores de presiÃ³n devuelven el sentido del tacto! ğŸ¤š" },
    { titulo: "âœ… Quiz: ImpresiÃ³n 3D", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo revolucionÃ³ la impresiÃ³n 3D las prÃ³tesis?", opciones: ["No cambiÃ³ nada", "Redujo el costo de miles de dÃ³lares a cientos, haciÃ©ndolas accesibles", "Solo cambia el color", "Las hace mÃ¡s pesadas"], respuestaCorrecta: 1, explicacion: "Â¡De $50,000 a $50! Proyectos como e-NABLE crean prÃ³tesis 3D funcionales para niÃ±os. ğŸ–¨ï¸" },
    { titulo: "âœ… Quiz: Open Bionics", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© es el proyecto Open Bionics Hero Arm?", opciones: ["Un videojuego", "Una prÃ³tesis biÃ³nica accesible diseÃ±ada para ser atractiva para niÃ±os", "Un robot industrial", "Una app"], respuestaCorrecta: 1, explicacion: "Hero Arm es una prÃ³tesis multifuncional con diseÃ±os de superhÃ©roes. Â¡Los niÃ±os se sienten empoderados! ğŸ¦¸" },
    { titulo: "âœ…âŒ PrÃ³tesis: Â¿V o F?", tipo: 'true_false', statements: [{ text: 'Existen prÃ³tesis de pierna que permiten correr e incluso competir en deportes.', correct: true, explain: 'Las prÃ³tesis blade permiten sprint. Â¡Atletas paralÃ­mpicos compiten al mÃ¡s alto nivel!' }, { text: 'Las prÃ³tesis biÃ³nicas actuales restauran el 100% de la funcionalidad natural.', correct: false, explain: 'Aunque avanzan mucho, aÃºn no igualan la precisiÃ³n y sensibilidad de un miembro natural.' }] },
    { titulo: "ğŸ§© Tipos de PrÃ³tesis", tipo: 'matching_game', instruccion: 'Conecta cada tipo de prÃ³tesis con su caracterÃ­stica', pairs: [{ left: 'PrÃ³tesis pasiva', right: 'Solo estÃ©tica, sin movimiento' }, { left: 'PrÃ³tesis mecÃ¡nica', right: 'Movimiento por cables/poleas' }, { left: 'PrÃ³tesis mioelÃ©ctrica', right: 'Control por seÃ±ales EMG' }, { left: 'PrÃ³tesis 3D', right: 'Bajo costo y personalizable' }] },
  ],
  'w3_mod8_interfaz_cerebro': [
    { titulo: "âœ… Quiz: BCI", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© es una BCI (Interfaz Cerebro-Computadora)?", opciones: ["Un chip en el cerebro", "Un sistema que traduce seÃ±ales cerebrales en comandos para dispositivos", "Un tipo de pantalla", "Una red de computadoras"], respuestaCorrecta: 1, explicacion: "BCI lee las ondas cerebrales (EEG) y las convierte en acciones: mover un cursor, brazo robÃ³tico o silla de ruedas. ğŸ§ ğŸ’»" },
    { titulo: "âœ… Quiz: EEG", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© es un EEG en el contexto de las BCI?", opciones: ["Un tipo de motor", "Un electroencefalograma que mide la actividad elÃ©ctrica del cerebro", "Una baterÃ­a", "Un protocolo de internet"], respuestaCorrecta: 1, explicacion: "EEG usa electrodos en el cuero cabelludo para detectar ondas cerebrales. Â¡No invasivo y accesible! ğŸ§ ğŸ“Š" },
    { titulo: "âœ… Quiz: Ondas Cerebrales", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© ondas cerebrales se asocian con la concentraciÃ³n?", opciones: ["Delta (sueÃ±o profundo)", "Beta (concentraciÃ³n activa)", "Theta (somnolencia)", "No tiene ondas"], respuestaCorrecta: 1, explicacion: "Beta (13-30 Hz) = concentraciÃ³n. Alpha = relajaciÃ³n. Delta = sueÃ±o profundo. Â¡Cada estado tiene su onda! ğŸŒŠ" },
    { titulo: "âœ… Quiz: Neuralink", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© tipo de BCI es Neuralink de Elon Musk?", opciones: ["No invasivo", "Invasivo (implante cerebral con electrodos)", "Solo software", "Un videojuego"], respuestaCorrecta: 1, explicacion: "Neuralink implanta chips con miles de electrodos directamente en el cerebro para seÃ±ales mÃ¡s precisas. ğŸ§ ğŸ”Œ" },
    { titulo: "âœ… Quiz: AplicaciÃ³n BCI", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo puede una BCI ayudar a una persona con parÃ¡lisis total?", opciones: ["No puede", "PermitiÃ©ndole controlar computadora, silla o brazo robÃ³tico con el pensamiento", "Solo mide ondas", "Solo para investigaciÃ³n"], respuestaCorrecta: 1, explicacion: "Â¡Libertad a travÃ©s del pensamiento! Personas con ELA pueden comunicarse y controlar dispositivos con BCIs. ğŸ¯" },
    { titulo: "âœ…âŒ BCI: Â¿V o F?", tipo: 'true_false', statements: [{ text: 'El EEG puede detectar si una persona estÃ¡ concentrada, relajada o dormida.', correct: true, explain: 'Diferentes estados mentales producen ondas cerebrales con frecuencias distintas.' }, { text: 'Las BCI actuales pueden leer pensamientos especÃ­ficos como palabras.', correct: false, explain: 'Las BCI detectan patrones generales (concentraciÃ³n, imaginaciÃ³n motora), no pensamientos especÃ­ficos.' }] },
    { titulo: "ğŸ§© Tipos de BCI", tipo: 'matching_game', instruccion: 'Conecta cada tipo de BCI con su mÃ©todo', pairs: [{ left: 'EEG (no invasivo)', right: 'Electrodos en el cuero cabelludo' }, { left: 'ECoG (semi-invasivo)', right: 'Electrodos sobre la corteza' }, { left: 'Implante (invasivo)', right: 'Electrodos dentro del cerebro' }, { left: 'fNIRS', right: 'Luz infrarroja en la cabeza' }] },
  ],
  'w3_mod9_robots_blandos': [
    { titulo: "âœ… Quiz: Soft Robot", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© es un soft robot (robot blando)?", opciones: ["Un robot de peluche", "Un robot hecho de materiales flexibles sin estructura rÃ­gida", "Un robot pequeÃ±o", "Un robot lento"], respuestaCorrecta: 1, explicacion: "Los soft robots usan silicona y elastÃ³meros en vez de metal. Â¡Se deforman y adaptan como un pulpo! ğŸ™" },
    { titulo: "âœ… Quiz: Material Principal", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡l es el material mÃ¡s usado para fabricar soft robots?", opciones: ["Acero", "Silicona y elastÃ³meros", "Madera", "Vidrio"], respuestaCorrecta: 1, explicacion: "La silicona es flexible, biocompatible y se puede moldear con canales internos para actuaciÃ³n neumÃ¡tica. ğŸ§ª" },
    { titulo: "âœ… Quiz: ActuaciÃ³n NeumÃ¡tica", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo se mueve un tentÃ¡culo de soft robot?", opciones: ["Con motores internos", "Inflando y desinflando cÃ¡maras de aire dentro del material", "Con imanes", "Con cables"], respuestaCorrecta: 1, explicacion: "Al inflar diferentes cÃ¡maras, el tentÃ¡culo se curva en distintas direcciones. Â¡Como un pulpo! ğŸ™ğŸ’¨" },
    { titulo: "âœ… Quiz: Seguridad", tipo: 'mini_quiz', pregunta: "Â¿Por quÃ© los soft robots son mÃ¡s seguros para interactuar con humanos?", opciones: ["Son mÃ¡s lentos", "No tienen bordes duros ni partes rÃ­gidas que causen lesiones", "Son mÃ¡s caros", "Son mÃ¡s pequeÃ±os"], respuestaCorrecta: 1, explicacion: "Al ser blandos, pueden tocar personas sin hacer daÃ±o. Â¡Ideales para medicina y rescate! ğŸ¤" },
    { titulo: "âœ… Quiz: CirugÃ­a", tipo: 'mini_quiz', pregunta: "Â¿En quÃ© campo son especialmente Ãºtiles los soft robots?", opciones: ["ConstrucciÃ³n pesada", "CirugÃ­a mÃ­nimamente invasiva y manipular objetos frÃ¡giles", "MinerÃ­a", "Solo en laboratorios"], respuestaCorrecta: 1, explicacion: "En cirugÃ­a navegan por el cuerpo sin daÃ±ar tejidos. TambiÃ©n agarran frutas sin aplastarlas. ğŸ“ğŸ¥" },
    { titulo: "âœ…âŒ Soft Robots: Â¿V o F?", tipo: 'true_false', statements: [{ text: 'Un soft robot puede cambiar de forma para pasar por espacios estrechos.', correct: true, explain: 'Al ser deformables, pueden comprimirse y adaptarse a espacios reducidos.' }, { text: 'Los soft robots son tan precisos como los brazos industriales rÃ­gidos.', correct: false, explain: 'La flexibilidad dificulta el control preciso. Los robots rÃ­gidos son mÃ¡s precisos.' }] },
    { titulo: "ğŸ§© Soft vs Rigid Robots", tipo: 'matching_game', instruccion: 'Conecta cada caracterÃ­stica con el tipo de robot', pairs: [{ left: 'Manipular objetos frÃ¡giles', right: 'Soft robot (flexible)' }, { left: 'Ensamblar piezas con precisiÃ³n', right: 'Robot rÃ­gido' }, { left: 'Adaptarse a formas desconocidas', right: 'Soft robot (flexible)' }, { left: 'Alta velocidad y repetibilidad', right: 'Robot rÃ­gido' }] },
  ],
  'w3_mod12_enjambres': [
    { titulo: "âœ… Quiz: RobÃ³tica de Enjambre", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© es la robÃ³tica de enjambre (swarm robotics)?", opciones: ["Un solo robot grande", "Muchos robots simples que cooperan para lograr tareas complejas", "Robots que atacan en grupo", "Robots de colecciÃ³n"], respuestaCorrecta: 1, explicacion: "Â¡Como hormigas o abejas! Cada robot es simple, pero juntos logran cosas complejas. ğŸœğŸ¤–" },
    { titulo: "âœ… Quiz: Reglas Locales", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo coordinan su comportamiento los robots de enjambre?", opciones: ["Un lÃ­der central da Ã³rdenes", "Cada robot sigue reglas locales y el comportamiento colectivo emerge", "Por internet", "No se coordinan"], respuestaCorrecta: 1, explicacion: "Sin lÃ­der central. Cada robot solo sabe de sus vecinos. Â¡El comportamiento inteligente emerge! ğŸ§ " },
    { titulo: "âœ… Quiz: InspiraciÃ³n Natural", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© animal inspira mÃ¡s la robÃ³tica de enjambre?", opciones: ["El Ã¡guila", "Las hormigas (colonias organizadas sin lÃ­der)", "El leÃ³n", "El elefante"], respuestaCorrecta: 1, explicacion: "Las hormigas encuentran caminos Ã³ptimos, transportan cargas enormes y construyen. Â¡Todo con reglas simples! ğŸœ" },
    { titulo: "âœ… Quiz: Tolerancia a Fallos", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© pasa si un robot del enjambre se rompe?", opciones: ["Todo falla", "Los demÃ¡s continÃºan la tarea, el sistema es tolerante a fallos", "Hay que reprogramar todo", "Los otros se detienen"], respuestaCorrecta: 1, explicacion: "Â¡Resiliencia! Como en una colonia de hormigas, si algunas mueren, la colonia sigue. No hay punto Ãºnico de fallo. ğŸ’ª" },
    { titulo: "âœ… Quiz: Aplicaciones", tipo: 'mini_quiz', pregunta: "Â¿En quÃ© situaciÃ³n serÃ­a ideal usar robots de enjambre?", opciones: ["Lavar platos", "Buscar supervivientes en un Ã¡rea grande de desastre", "Cocinar", "Pintar una pared"], respuestaCorrecta: 1, explicacion: "Â¡BÃºsqueda y rescate! 100 drones pueden cubrir un Ã¡rea enorme rÃ¡pidamente. ğŸšğŸ”" },
    { titulo: "âœ…âŒ Enjambre: Â¿V o F?", tipo: 'true_false', statements: [{ text: 'Los robots de enjambre son mÃ¡s baratos individualmente que un solo robot complejo.', correct: true, explain: 'Cada robot es simple y barato. La inteligencia viene de la cantidad y cooperaciÃ³n.' }, { text: 'Los robots de enjambre necesitan un computador central.', correct: false, explain: 'No hay control centralizado. Cada robot toma decisiones locales.' }] },
    { titulo: "ğŸ§© Conceptos de Enjambre", tipo: 'matching_game', instruccion: 'Conecta cada concepto con su significado', pairs: [{ left: 'Emergencia', right: 'Comportamiento complejo de reglas simples' }, { left: 'Estigmergia', right: 'ComunicaciÃ³n indirecta por el ambiente' }, { left: 'Escalabilidad', right: 'Funciona con 10 o 10,000 robots' }, { left: 'Resiliencia', right: 'Tolerancia a fallos individuales' }] },
  ],
  'w3_mod13_micro_robots': [
    { titulo: "âœ… Quiz: Micro Robot", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© tamaÃ±o tiene un micro robot?", opciones: ["1 metro", "MilÃ­metros a centÃ­metros", "10 metros", "100 metros"], respuestaCorrecta: 1, explicacion: "Los micro robots miden milÃ­metros a pocos centÃ­metros. Los nano robots serÃ­an de tamaÃ±o molecular. Â¡Diminutos! ğŸ”¬" },
    { titulo: "âœ… Quiz: Nanomedicina", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo podrÃ­an los nano robots revolucionar la medicina?", opciones: ["Siendo doctores", "Navegando por el cuerpo para entregar medicamentos directamente a cÃ©lulas enfermas", "Reemplazando hospitales", "Solo investigaciÃ³n"], respuestaCorrecta: 1, explicacion: "Â¡Nanomedicina! Robots microscÃ³picos que atacan cÃ©lulas cancerosas sin daÃ±ar las sanas. ğŸ’ŠğŸ”¬" },
    { titulo: "âœ… Quiz: PropulsiÃ³n", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo se propulsan los micro robots dentro del cuerpo?", opciones: ["Con motores diesel", "Con campos magnÃ©ticos externos o reacciones quÃ­micas", "Con baterÃ­as", "Con WiFi"], respuestaCorrecta: 1, explicacion: "Â¡Sin baterÃ­as! Los campos magnÃ©ticos externos los guÃ­an y las reacciones quÃ­micas generan movimiento. ğŸ§²" },
    { titulo: "âœ… Quiz: MEMS", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© son los MEMS?", opciones: ["Un tipo de motor", "Sistemas micro-electromecÃ¡nicos: sensores y actuadores microscÃ³picos", "Una marca de robot", "Un software"], respuestaCorrecta: 1, explicacion: "MEMS = Micro Electro-Mechanical Systems. El acelerÃ³metro de tu celular es un MEMS. ğŸ“±ğŸ”¬" },
    { titulo: "âœ… Quiz: Retos", tipo: 'mini_quiz', pregunta: "Â¿CuÃ¡l es un gran reto de los micro/nano robots?", opciones: ["Son muy caros", "EnergÃ­a: no pueden llevar baterÃ­as y son difÃ­ciles de rastrear", "Son ruidosos", "Se oxidan"], respuestaCorrecta: 1, explicacion: "A escala nano no hay baterÃ­as. La energÃ­a viene del exterior y el rastreo es difÃ­cil. ğŸ”‹ğŸ”¬" },
    { titulo: "âœ…âŒ Micro/Nano: Â¿V o F?", tipo: 'true_false', statements: [{ text: 'Ya existen micro robots experimentales que nadan dentro de vasos sanguÃ­neos.', correct: true, explain: 'Investigadores han creado micro robots que navegan por fluidos corporales con campos magnÃ©ticos.' }, { text: 'Los nano robots ya se usan rutinariamente en hospitales.', correct: false, explain: 'AÃºn estÃ¡n en fase de investigaciÃ³n. Los ensayos clÃ­nicos apenas comienzan.' }] },
    { titulo: "ğŸ§© Escalas de Robot", tipo: 'matching_game', instruccion: 'Conecta cada escala con su aplicaciÃ³n tÃ­pica', pairs: [{ left: 'Nano (nm)', right: 'Entregar medicamentos a cÃ©lulas' }, { left: 'Micro (mm)', right: 'CirugÃ­a mÃ­nimamente invasiva' }, { left: 'Mini (cm)', right: 'InspecciÃ³n de tuberÃ­as' }, { left: 'Macro (m)', right: 'Robots industriales' }] },
  ],
  'w3_mod16_proyecto_bio_final': [
    { titulo: "âœ… Quiz: Proyecto BiÃ³nico", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© define a un proyecto de robÃ³tica biÃ³nica?", opciones: ["Usar robots grandes", "Integrar principios biolÃ³gicos en un robot que resuelve un problema real", "Solo hacer un robot bonito", "Copiar otro proyecto"], respuestaCorrecta: 1, explicacion: "Un proyecto biÃ³nico combina biologÃ­a + robÃ³tica para resolver un problema real. ğŸ¦¾ğŸŒ¿" },
    { titulo: "âœ… Quiz: PlanificaciÃ³n BiÃ³nica", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© debe incluir la fase de planificaciÃ³n?", opciones: ["Solo el presupuesto", "InvestigaciÃ³n biolÃ³gica, diseÃ±o del robot, lista de materiales y cronograma", "Solo el cÃ³digo", "Solo dibujos"], respuestaCorrecta: 1, explicacion: "Investiga el organismo, diseÃ±a el mecanismo, lista componentes y planifica las fases. Â¡IngenierÃ­a profesional! ğŸ“‹" },
    { titulo: "âœ… Quiz: DocumentaciÃ³n", tipo: 'mini_quiz', pregunta: "Â¿Por quÃ© documentar un proyecto biÃ³nico como un paper cientÃ­fico?", opciones: ["No es importante", "Para que otros puedan replicar, mejorar y contribuir al conocimiento", "Solo para la calificaciÃ³n", "Para vender mÃ¡s"], respuestaCorrecta: 1, explicacion: "La documentaciÃ³n permite replicabilidad, mejoras futuras y compartir con la comunidad. Â¡Ciencia abierta! ğŸ“" },
    { titulo: "âœ… Quiz: Prototipo", tipo: 'mini_quiz', pregunta: "Â¿QuÃ© es un prototipo rÃ¡pido y por quÃ© es Ãºtil?", opciones: ["Un robot final", "Una versiÃ³n simple para probar ideas rÃ¡pido antes de la versiÃ³n final", "Un robot rÃ¡pido", "Un robot de carreras"], respuestaCorrecta: 1, explicacion: "Â¡Falla rÃ¡pido, aprende rÃ¡pido! Un prototipo con cartÃ³n te muestra si tu idea funciona antes de invertir. ğŸ”§" },
    { titulo: "âœ… Quiz: MÃ©tricas", tipo: 'mini_quiz', pregunta: "Â¿CÃ³mo mides si tu proyecto biÃ³nico fue exitoso?", opciones: ["Si se ve bonito", "Comparando mÃ©tricas medibles del robot vs los objetivos definidos", "Si funciona a veces", "Si cuesta mucho"], respuestaCorrecta: 1, explicacion: "Define mÃ©tricas: Â¿puede la garra levantar X gramos? Â¿se mueve en Y grados? Â¡Mide y compara! ğŸ“Š" },
    { titulo: "âœ…âŒ Proyecto BiÃ³nico: Â¿V o F?", tipo: 'true_false', statements: [{ text: 'Los mejores proyectos biÃ³nicos combinan investigaciÃ³n biolÃ³gica con ingenierÃ­a.', correct: true, explain: 'La fusiÃ³n de biologÃ­a e ingenierÃ­a produce las soluciones mÃ¡s innovadoras.' }, { text: 'Un proyecto biÃ³nico exitoso siempre debe ser comercializable.', correct: false, explain: 'Un proyecto exitoso resuelve un problema o genera conocimiento, no necesariamente se vende.' }] },
    { titulo: "ğŸ§© Fases del Proyecto", tipo: 'matching_game', instruccion: 'Ordena las fases del proyecto final biÃ³nico', pairs: [{ left: '1ï¸âƒ£ Investigar', right: 'Estudiar el organismo y el problema' }, { left: '2ï¸âƒ£ DiseÃ±ar', right: 'Crear planos y lista de materiales' }, { left: '3ï¸âƒ£ Construir', right: 'Montar y programar el robot' }, { left: '4ï¸âƒ£ Evaluar', right: 'Medir resultados y documentar' }] },
  ],
};

console.log('=== WORLD 3: Fix Missing Modules ===');
injectQuestions('src/data/world3Data.js', W3_FIX);
console.log('Done!');
